/* Generated by Nimrod Compiler v0.9.3 */
/*   (c) 2012 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: MacOSX, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -O3 -fno-strict-aliasing  -I/usr/src/extras/Nimrod/lib -o compiler/nimcache/rstgen.o compiler/nimcache/rstgen.c */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>

#include <dirent.h>

#include <sys/types.h>

#include <sys/stat.h>

#include <sys/time.h>

#include <stdio.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct tcell38449 tcell38449;
typedef struct TNimType TNimType;
typedef struct tcellseq38465 tcellseq38465;
typedef struct tgcheap40416 tgcheap40416;
typedef struct tcellset38461 tcellset38461;
typedef struct tpagedesc38457 tpagedesc38457;
typedef struct tmemregion22010 tmemregion22010;
typedef struct tsmallchunk21243 tsmallchunk21243;
typedef struct tllchunk22004 tllchunk22004;
typedef struct tbigchunk21245 tbigchunk21245;
typedef struct tintset21218 tintset21218;
typedef struct ttrunk21214 ttrunk21214;
typedef struct tavlnode22008 tavlnode22008;
typedef struct tgcstat40414 tgcstat40414;
typedef struct trstgenerator288012 trstgenerator288012;
typedef struct trstnode277016 trstnode277016;
typedef struct trstnodeseq277014 trstnodeseq277014;
typedef struct TNimObject TNimObject;
typedef struct TNimNode TNimNode;
typedef struct tstringtable103609 tstringtable103609;
typedef struct TY288028 TY288028;
typedef struct ttocentry288008 ttocentry288008;
typedef struct tgeneraltokenizer284011 tgeneraltokenizer284011;
typedef struct TY288490 TY288490;
typedef struct tindexentry288427 tindexentry288427;
typedef struct tbasechunk21241 tbasechunk21241;
typedef struct tfreecell21233 tfreecell21233;
typedef struct tkeyvaluepairseq103607 tkeyvaluepairseq103607;
typedef struct tkeyvaluepair103605 tkeyvaluepair103605;
struct TGenericSeq {
NI len;
NI reserved;
};
typedef NIM_CHAR TY611[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY611 data;
};
struct tcell38449 {
NI Refcount;
TNimType* Typ;
};
struct tcellseq38465 {
NI Len;
NI Cap;
tcell38449** D;
};
struct tcellset38461 {
NI Counter;
NI Max;
tpagedesc38457* Head;
tpagedesc38457** Data;
};
typedef tsmallchunk21243* TY22022[512];
typedef ttrunk21214* ttrunkbuckets21216[256];
struct tintset21218 {
ttrunkbuckets21216 Data;
};
struct tmemregion22010 {
NI Minlargeobj;
NI Maxlargeobj;
TY22022 Freesmallchunks;
tllchunk22004* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
NI Lastsize;
tbigchunk21245* Freechunkslist;
tintset21218 Chunkstarts;
tavlnode22008* Root;
tavlnode22008* Deleted;
tavlnode22008* Last;
tavlnode22008* Freeavlnodes;
};
struct tgcstat40414 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
NI64 Maxpause;
};
struct tgcheap40416 {
void* Stackbottom;
NI Cyclethreshold;
tcellseq38465 Zct;
tcellseq38465 Decstack;
tcellset38461 Cycleroots;
tcellseq38465 Tempstack;
NI Recgclock;
tmemregion22010 Region;
tgcstat40414 Stat;
};
struct trstnode277016 {
NU8 Kind;
NimStringDesc* Text;
NI Level;
trstnodeseq277014* Sons;
};
typedef N_NIMCALL_PTR(void, TY891) (void* p, NI op);
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY891 marker;
};
struct TNimObject {
TNimType* m_type;
};
struct ttocentry288008 {
trstnode277016* N;
NimStringDesc* Refname;
NimStringDesc* Header;
};
typedef N_NIMCALL_PTR(NimStringDesc*, tfindfilehandler278016) (NimStringDesc* filename);
typedef N_NIMCALL_PTR(void, tmsghandler278014) (NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
typedef NimStringDesc* TY288036[5];
struct trstgenerator288012 {
  TNimObject Sup;
NU8 Target;
tstringtable103609* Config;
NI Splitafter;
TY288028* Tocpart;
NIM_BOOL Hastoc;
NimStringDesc* Theindex;
NU8 Options;
tfindfilehandler278016 Findfile;
tmsghandler278014 Msghandler;
NimStringDesc* Filename;
TY288036 Meta;
};
typedef NimStringDesc* TY129439[4];
typedef NimStringDesc* TY129263[1];
typedef NimStringDesc* TY105434[2];
typedef NimStringDesc* TY424073[1];
struct tgeneraltokenizer284011 {
  TNimObject Sup;
NU8 Kind;
NI Start;
NI Length;
NCSTRING Buf;
NI Pos;
NU8 State;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef NimStringDesc* TY284066[33];
struct tindexentry288427 {
NimStringDesc* Keyword;
NimStringDesc* Link;
};
typedef NIM_CHAR TY84547[256];
typedef NI TY21221[8];
struct tpagedesc38457 {
tpagedesc38457* Next;
NI Key;
TY21221 Bits;
};
struct tbasechunk21241 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct tsmallchunk21243 {
  tbasechunk21241 Sup;
tsmallchunk21243* Next;
tsmallchunk21243* Prev;
tfreecell21233* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
struct tllchunk22004 {
NI Size;
NI Acc;
tllchunk22004* Next;
};
struct tbigchunk21245 {
  tbasechunk21241 Sup;
tbigchunk21245* Next;
tbigchunk21245* Prev;
NI Align;
NF64 Data;
};
struct ttrunk21214 {
ttrunk21214* Next;
NI Key;
TY21221 Bits;
};
typedef tavlnode22008* TY22014[2];
struct tavlnode22008 {
TY22014 Link;
NI Key;
NI Upperbound;
NI Level;
};
struct tkeyvaluepair103605 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
struct tstringtable103609 {
  TNimObject Sup;
NI Counter;
tkeyvaluepairseq103607* Data;
NU8 Mode;
};
struct tfreecell21233 {
tfreecell21233* Next;
NI Zerofield;
};
struct trstnodeseq277014 {
  TGenericSeq Sup;
  trstnode277016* data[SEQ_DECL_SIZE];
};
struct TY288028 {
  TGenericSeq Sup;
  ttocentry288008 data[SEQ_DECL_SIZE];
};
struct TY288490 {
  TGenericSeq Sup;
  tindexentry288427 data[SEQ_DECL_SIZE];
};
struct tkeyvaluepairseq103607 {
  TGenericSeq Sup;
  tkeyvaluepair103605 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(tcell38449*, usrtocell_41843)(void* usr);
static N_INLINE(void, rtladdzct_43002)(tcell38449* c);
N_NOINLINE(void, addzct_41815)(tcellseq38465* s, tcell38449* c);
N_NIMCALL(void, renderaux_288305)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(NI, len_277087)(trstnode277016* n);
N_NIMCALL(void, renderrsttoout_288298)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(void, renderheadline_288609)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rstnodetorefname_278048)(trstnode277016* n);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(void, dispa_288281)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argslen0);
N_NIMCALL(void, nsuAddf)(NimStringDesc** s, NimStringDesc* formatstr, NimStringDesc** a, NI alen0);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR x);
N_NIMCALL(void, renderoverline_288679)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(void, renderaux_288327)(trstgenerator288012* d, trstnode277016* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result);
N_NIMCALL(void, renderfield_289077)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, addnodes_278052)(trstnode277016* n);
N_NIMCALL(NimStringDesc*, esc_288194)(NU8 target, NimStringDesc* s, NI splitafter);
N_NIMCALL(NI, nextsplitpoint_288148)(NimStringDesc* s, NI start);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_INLINE(void, escchar_288140)(NU8 target, NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addxmlchar_288116)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(void, addtexchar_288130)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s, NIM_BOOL leading, NIM_BOOL trailing);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* a, NimStringDesc* b);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NOINLINE(void, raiseassert_71089)(NimStringDesc* msg);
N_NIMCALL(NimStringDesc*, texcolumns_289057)(trstnode277016* n);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(trstnode277016*, lastson_277148)(trstnode277016* n);
N_NIMCALL(void, renderimage_288792)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, getfieldvalue_278056)(trstnode277016* n, NimStringDesc* fieldname);
N_NIMCALL(NimStringDesc*, dispf_288265)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argslen0);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* formatstr, NimStringDesc** a, NI alen0);
N_NIMCALL(NimStringDesc*, getargument_278061)(trstnode277016* n);
N_NIMCALL(void, rendercodeblock_288849)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(NU8, getsourcelanguage_284074)(NimStringDesc* name);
N_NIMCALL(void, initgeneraltokenizer_284128)(tgeneraltokenizer284011* g, NimStringDesc* buf);
N_NIMCALL(void, getnexttoken_286667)(tgeneraltokenizer284011* g, NU8 lang);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_63424, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
N_NIMCALL(void, deinitgeneraltokenizer_284163)(tgeneraltokenizer284011* g);
N_NIMCALL(void, rendercontainer_289038)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(void, renderindexterm_288411)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c);
N_NIMCALL(NI, hash_288376)(trstnode277016* n);
N_NIMCALL(NI, hash_101825)(NimStringDesc* x);
static N_INLINE(NI, HEX21HEX26_101011)(NI h, NI val);
static N_INLINE(NI, HEX21HEX24_101042)(NI h);
N_NIMCALL(void, setindexterm_288368)(trstgenerator288012* d, NimStringDesc* id, NimStringDesc* term);
N_NIMCALL(NimStringDesc*, noschangeFileExt)(NimStringDesc* filename, NimStringDesc* ext);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* path);
N_NIMCALL(void, rendersmiley_288837)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP4012)(void* p, NI op);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(NimStringDesc*, nstGet)(tstringtable103609* t, NimStringDesc* key);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* s);
N_NIMCALL(void, rendertocentry_288745)(trstgenerator288012* d, ttocentry288008* e, NimStringDesc** result);
N_NIMCALL(void, rendertocentries_288757)(trstgenerator288012* d, NI* j, NI lvl, NimStringDesc** result);
N_NIMCALL(void, writefile_9042)(NimStringDesc* filename, NimStringDesc* content);
N_NIMCALL(void, TMP4102)(void* p, NI op);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING str);
N_NIMCALL(NimStringDesc*, HEX2F_94062)(NimStringDesc* head, NimStringDesc* tail);
N_NIMCALL(NIM_BOOL, nsuEndsWith)(NimStringDesc* s, NimStringDesc* suffix);
N_NIMCALL(FILE*, open_8832)(NimStringDesc* filename, NU8 mode, NI bufsize);
N_NIMCALL(NimStringDesc*, rawNewString)(NI cap);
N_NIMCALL(NIM_BOOL, readline_9086)(FILE* f, NimStringDesc** line);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI start);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI first);
N_NIMCALL(void, sortindex_288445)(tindexentry288427* a, NI alen0);
N_NIMCALL(void, HEX3CHEX2D_288438)(tindexentry288427* a, tindexentry288427 b);
N_NIMCALL(NI, cmp_288431)(tindexentry288427 a, tindexentry288427 b);
STRING_LITERAL(TMP874, "<wbr />", 7);
STRING_LITERAL(TMP1877, "", 0);
STRING_LITERAL(TMP1879, "<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2_toc\">$3</a></h$1>", 63);
STRING_LITERAL(TMP1880, "\\rsth$4{$3}\\label{$2}\012", 22);
STRING_LITERAL(TMP1881, "<h$1 id=\"$2\">$3</h$1>", 21);
STRING_LITERAL(TMP1882, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP1883, "\\rstov$4{$3}\\label{$2}\012", 23);
STRING_LITERAL(TMP1884, "<hr />\012", 7);
STRING_LITERAL(TMP1885, "\\hrule\012", 7);
STRING_LITERAL(TMP1886, "<p>$1</p>\012", 10);
STRING_LITERAL(TMP1887, "$1\012\012", 4);
STRING_LITERAL(TMP1888, "<ul class=\"simple\">$1</ul>\012", 27);
STRING_LITERAL(TMP1889, "\\begin{itemize}$1\\end{itemize}\012", 31);
STRING_LITERAL(TMP1890, "<li>$1</li>\012", 12);
STRING_LITERAL(TMP1891, "\\item $1\012", 9);
STRING_LITERAL(TMP1892, "<ol class=\"simple\">$1</ol>\012", 27);
STRING_LITERAL(TMP1893, "\\begin{enumerate}$1\\end{enumerate}\012", 35);
STRING_LITERAL(TMP1894, "<dl class=\"docutils\">$1</dl>\012", 29);
STRING_LITERAL(TMP1895, "\\begin{description}$1\\end{description}\012", 39);
STRING_LITERAL(TMP1896, "<dt>$1</dt>\012", 12);
STRING_LITERAL(TMP1897, "\\item[$1] ", 10);
STRING_LITERAL(TMP1898, "<dd>$1</dd>\012", 12);
STRING_LITERAL(TMP1899, "$1\012", 3);
STRING_LITERAL(TMP1900, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP1901, " ", 1);
STRING_LITERAL(TMP1902, "&amp;", 5);
STRING_LITERAL(TMP1903, "&lt;", 4);
STRING_LITERAL(TMP1904, "&gt;", 4);
STRING_LITERAL(TMP1905, "&quot;", 6);
STRING_LITERAL(TMP1906, "\\_", 2);
STRING_LITERAL(TMP1907, "\\symbol{123}", 12);
STRING_LITERAL(TMP1908, "\\symbol{125}", 12);
STRING_LITERAL(TMP1909, "\\symbol{91}", 11);
STRING_LITERAL(TMP1910, "\\symbol{93}", 11);
STRING_LITERAL(TMP1911, "\\symbol{92}", 11);
STRING_LITERAL(TMP1912, "\\$", 2);
STRING_LITERAL(TMP1913, "\\&", 2);
STRING_LITERAL(TMP1914, "\\#", 2);
STRING_LITERAL(TMP1915, "\\%", 2);
STRING_LITERAL(TMP1916, "\\symbol{126}", 12);
STRING_LITERAL(TMP1917, "\\symbol{64}", 11);
STRING_LITERAL(TMP1918, "\\symbol{94}", 11);
STRING_LITERAL(TMP1919, "\\symbol{96}", 11);
STRING_LITERAL(TMP1920, "author", 6);
STRING_LITERAL(TMP1921, "authors", 7);
STRING_LITERAL(TMP1922, "version", 7);
STRING_LITERAL(TMP1923, "<tr>$1</tr>\012", 12);
STRING_LITERAL(TMP1924, "$1", 2);
STRING_LITERAL(TMP1925, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP1926, "\\item[$1:]", 10);
STRING_LITERAL(TMP1927, "<td>$1</td>", 11);
STRING_LITERAL(TMP1928, " $1\012", 4);
STRING_LITERAL(TMP1929, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP1930, "\\begin{description}\012$1\\end{description}\012", 40);
STRING_LITERAL(TMP1931, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP1932, "\\item[$1]", 9);
STRING_LITERAL(TMP1933, "<td align=\"left\">$1</td>\012", 25);
STRING_LITERAL(TMP1935, "false renderRstToOut", 20);
STRING_LITERAL(TMP1936, "<pre>$1</pre>\012", 14);
STRING_LITERAL(TMP1937, "\\begin{rstpre}\012$1\012\\end{rstpre}\012", 31);
STRING_LITERAL(TMP1938, "<p>$1</p>", 9);
STRING_LITERAL(TMP1939, "$1<br />", 8);
STRING_LITERAL(TMP1940, "$1\\\\\012", 5);
STRING_LITERAL(TMP1941, "<blockquote><p>$1</p></blockquote>\012", 35);
STRING_LITERAL(TMP1942, "\\begin{quote}$1\\end{quote}\012", 27);
STRING_LITERAL(TMP1943, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP1944, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP1945, "|X", 2);
STRING_LITERAL(TMP1946, "|}\012\\hline\012$1\\end{rsttab}\\end{table}", 35);
STRING_LITERAL(TMP1947, " & ", 3);
STRING_LITERAL(TMP1948, "\\\\\012\\hline\012", 10);
STRING_LITERAL(TMP1949, "<tr>", 4);
STRING_LITERAL(TMP1950, "</tr>\012", 6);
STRING_LITERAL(TMP1951, "<th>$1</th>", 11);
STRING_LITERAL(TMP1952, "\\textbf{$1}", 11);
STRING_LITERAL(TMP1953, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP1954, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP1955, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP1956, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP1957, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP1958, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP1960, "scale", 5);
STRING_LITERAL(TMP1961, " scale=\"$1\"", 11);
STRING_LITERAL(TMP1962, " scale=$1", 9);
STRING_LITERAL(TMP1963, "height", 6);
STRING_LITERAL(TMP1964, " height=\"$1\"", 12);
STRING_LITERAL(TMP1965, " height=$1", 10);
STRING_LITERAL(TMP1966, "width", 5);
STRING_LITERAL(TMP1967, " width=\"$1\"", 11);
STRING_LITERAL(TMP1968, " width=$1", 9);
STRING_LITERAL(TMP1969, "alt", 3);
STRING_LITERAL(TMP1970, " alt=\"$1\"", 9);
STRING_LITERAL(TMP1971, "align", 5);
STRING_LITERAL(TMP1972, " align=\"$1\"", 11);
STRING_LITERAL(TMP1973, "[$1]", 4);
STRING_LITERAL(TMP1974, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP1975, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP1982, "<pre>", 5);
STRING_LITERAL(TMP1983, "\\begin{rstpre}\012", 15);
STRING_LITERAL(TMP2144, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP2145, "\\span$2{$1}", 11);
extern NIM_CONST TY284066 tokenclasstostr_284065;
STRING_LITERAL(TMP2179, "</pre>", 6);
STRING_LITERAL(TMP2180, "\012\\end{rstpre}\012", 14);
STRING_LITERAL(TMP2181, "<div>$1</div>", 13);
STRING_LITERAL(TMP2182, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP2183, "$2", 2);
STRING_LITERAL(TMP2184, "|$1|", 4);
STRING_LITERAL(TMP2185, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP2186, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP2187, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP2188, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP2189, "<em>$1</em>", 11);
STRING_LITERAL(TMP2190, "\\emph{$1}", 9);
STRING_LITERAL(TMP2191, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP2192, "<strong><em>$1</em></strong>", 28);
STRING_LITERAL(TMP2193, "\\textbf{emph{$1}}", 17);
STRING_LITERAL(TMP2194, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP2195, "html", 4);
STRING_LITERAL(TMP2196, "\012", 1);
STRING_LITERAL(TMP2197, "<span id=\"$1\">$2</span>", 23);
STRING_LITERAL(TMP2198, "$2\\label{$1}", 12);
STRING_LITERAL(TMP2199, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP2200, "\\texttt{$1}", 11);
STRING_LITERAL(TMP2201, "<img src=\"/images/smilies/$1.gif\" width=\"15\"\012        height=\"17"
"\" hspace=\"2\" vspace=\"2\" />", 89);
STRING_LITERAL(TMP2202, "\\includegraphics{$1}", 20);
STRING_LITERAL(TMP4015, "split.item.toc", 14);
STRING_LITERAL(TMP4051, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>\012", 60);
STRING_LITERAL(TMP4052, "\\item\\label{$1_toc} $2\\ref{$1}\012", 31);
STRING_LITERAL(TMP4053, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP4054, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP4103, ".", 1);
STRING_LITERAL(TMP4104, "..", 2);
STRING_LITERAL(TMP4105, ".idx", 4);
STRING_LITERAL(TMP4106, "<dt><span>$1</span></dt><ul class=\"simple\"><dd>\012", 48);
STRING_LITERAL(TMP4107, "<li><a class=\"reference external\" href=\"$1\">$1</a></li>\012", 56);
STRING_LITERAL(TMP4108, "</ul></dd>\012", 11);
NimStringDesc* splitter_288137;
extern tgcheap40416 gch_40442;
extern TNimType NTI284011; /* TGeneralTokenizer */
extern TNimType NTI1009; /* TObject */
TNimType NTI288012; /* TRstGenerator */
TNimType NTI288006; /* TOutputTarget */
extern TNimType NTI103611; /* PStringTable */
extern TNimType NTI105; /* int */
TNimType NTI288008; /* TTocEntry */
extern TNimType NTI277012; /* PRSTNode */
extern TNimType NTI143; /* string */
TNimType NTI288028; /* seq[TTocEntry] */
extern TNimType NTI132; /* bool */
extern TNimType NTI278008; /* TRstParseOptions */
extern TNimType NTI278016; /* TFindFileHandler */
extern TNimType NTI278014; /* TMsgHandler */
TNimType NTI288036; /* array[TMetaEnum, string] */
TNimType NTI288427; /* TIndexEntry */
TNimType NTI288490; /* seq[TIndexEntry] */

static N_INLINE(tcell38449*, usrtocell_41843)(void* usr) {
	tcell38449* result;
	result = 0;
	result = ((tcell38449*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(tcell38449))))));
	return result;
}

static N_INLINE(void, rtladdzct_43002)(tcell38449* c) {
	addzct_41815(&gch_40442.Zct, c);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tcell38449* c;
	c = usrtocell_41843(p);
	{
		(*c).Refcount -= 8;
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		rtladdzct_43002(c);
	}
	LA3: ;
}

N_NIMCALL(void, renderaux_288305)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NI i_288319;
	NI HEX3Atmp_288320;
	NI LOC1;
	NI res_288322;
	i_288319 = 0;
	HEX3Atmp_288320 = 0;
	LOC1 = len_277087(n);
	HEX3Atmp_288320 = (NI64)(LOC1 - 1);
	res_288322 = 0;
	while (1) {
		if (!(res_288322 <= HEX3Atmp_288320)) goto LA2;
		i_288319 = res_288322;
		renderrsttoout_288298(d, (*n).Sons->data[i_288319], result);
		res_288322 += 1;
	} LA2: ;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		tcell38449* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_41843(src);
		(*c).Refcount += 8;
	}
	LA3: ;
	{
		tcell38449* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_41843((*dest));
		{
			(*c).Refcount -= 8;
			if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA11;
			rtladdzct_43002(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(void, dispa_288281)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argslen0) {
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		nsuAddf(dest, xml, args, argslen0);
	}
	goto LA1;
	LA3: ;
	{
		nsuAddf(dest, tex, args, argslen0);
	}
	LA1: ;
}

N_NIMCALL(void, renderheadline_288609)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NI i_288624;
	NI HEX3Atmp_288672;
	NI LOC1;
	NI res_288674;
	NimStringDesc* refname;
	tmp = copyString(((NimStringDesc*) &TMP1877));
	i_288624 = 0;
	HEX3Atmp_288672 = 0;
	LOC1 = len_277087(n);
	HEX3Atmp_288672 = (NI64)(LOC1 - 1);
	res_288674 = 0;
	while (1) {
		if (!(res_288674 <= HEX3Atmp_288672)) goto LA2;
		i_288624 = res_288674;
		renderrsttoout_288298(d, (*n).Sons->data[i_288624], &tmp);
		res_288674 += 1;
	} LA2: ;
	refname = rstnodetorefname_278048(n);
	{
		NI length;
		NimStringDesc* LOC7;
		NimStringDesc* LOC8;
		TY129439 LOC9;
		if (!(*d).Hastoc) goto LA5;
		length = (*d).Tocpart->Sup.len;
		(*d).Tocpart = (TY288028*) setLengthSeq(&((*d).Tocpart)->Sup, sizeof(ttocentry288008), (NI64)(length + 1));
		LOC7 = 0;
		LOC7 = (*d).Tocpart->data[length].Refname; (*d).Tocpart->data[length].Refname = copyStringRC1(refname);
		if (LOC7) nimGCunrefNoCycle(LOC7);
		asgnRefNoCycle((void**) &(*d).Tocpart->data[length].N, n);
		LOC8 = 0;
		LOC8 = (*d).Tocpart->data[length].Header; (*d).Tocpart->data[length].Header = copyStringRC1(tmp);
		if (LOC8) nimGCunrefNoCycle(LOC8);
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = nimIntToStr((*n).Level);
		LOC9[1] = copyString((*d).Tocpart->data[length].Refname);
		LOC9[2] = copyString(tmp);
		LOC9[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1879), ((NimStringDesc*) &TMP1880), LOC9, 4);
	}
	goto LA3;
	LA5: ;
	{
		TY129439 LOC11;
		memset((void*)LOC11, 0, sizeof(LOC11));
		LOC11[0] = nimIntToStr((*n).Level);
		LOC11[1] = copyString(refname);
		LOC11[2] = copyString(tmp);
		LOC11[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1881), ((NimStringDesc*) &TMP1880), LOC11, 4);
	}
	LA3: ;
}

N_NIMCALL(void, renderoverline_288679)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	{
		NI i_288693;
		NI HEX3Atmp_288728;
		NI LOC5;
		NI res_288730;
		if (!((*d).Meta[(((NU8) 1))- 0]->Sup.len == 0)) goto LA3;
		i_288693 = 0;
		HEX3Atmp_288728 = 0;
		LOC5 = len_277087(n);
		HEX3Atmp_288728 = (NI64)(LOC5 - 1);
		res_288730 = 0;
		while (1) {
			if (!(res_288730 <= HEX3Atmp_288728)) goto LA6;
			i_288693 = res_288730;
			renderrsttoout_288298(d, (*n).Sons->data[i_288693], &(*d).Meta[(((NU8) 1))- 0]);
			res_288730 += 1;
		} LA6: ;
	}
	goto LA1;
	LA3: ;
	{
		NI i_288703;
		NI HEX3Atmp_288732;
		NI LOC10;
		NI res_288734;
		if (!((*d).Meta[(((NU8) 2))- 0]->Sup.len == 0)) goto LA8;
		i_288703 = 0;
		HEX3Atmp_288732 = 0;
		LOC10 = len_277087(n);
		HEX3Atmp_288732 = (NI64)(LOC10 - 1);
		res_288734 = 0;
		while (1) {
			if (!(res_288734 <= HEX3Atmp_288732)) goto LA11;
			i_288703 = res_288734;
			renderrsttoout_288298(d, (*n).Sons->data[i_288703], &(*d).Meta[(((NU8) 2))- 0]);
			res_288734 += 1;
		} LA11: ;
	}
	goto LA1;
	LA8: ;
	{
		NimStringDesc* tmp;
		NI i_288714;
		NI HEX3Atmp_288736;
		NI LOC13;
		NI res_288738;
		TY129439 LOC15;
		tmp = copyString(((NimStringDesc*) &TMP1877));
		i_288714 = 0;
		HEX3Atmp_288736 = 0;
		LOC13 = len_277087(n);
		HEX3Atmp_288736 = (NI64)(LOC13 - 1);
		res_288738 = 0;
		while (1) {
			if (!(res_288738 <= HEX3Atmp_288736)) goto LA14;
			i_288714 = res_288738;
			renderrsttoout_288298(d, (*n).Sons->data[i_288714], &tmp);
			res_288738 += 1;
		} LA14: ;
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = nimIntToStr((*n).Level);
		LOC15[1] = rstnodetorefname_278048(n);
		LOC15[2] = copyString(tmp);
		LOC15[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1882), ((NimStringDesc*) &TMP1883), LOC15, 4);
	}
	LA1: ;
}

N_NIMCALL(void, renderaux_288327)(trstgenerator288012* d, trstnode277016* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result) {
	NimStringDesc* tmp;
	NI i_288344;
	NI HEX3Atmp_288360;
	NI LOC1;
	NI res_288362;
	tmp = copyString(((NimStringDesc*) &TMP1877));
	i_288344 = 0;
	HEX3Atmp_288360 = 0;
	LOC1 = len_277087(n);
	HEX3Atmp_288360 = (NI64)(LOC1 - 1);
	res_288362 = 0;
	while (1) {
		if (!(res_288362 <= HEX3Atmp_288360)) goto LA2;
		i_288344 = res_288362;
		renderrsttoout_288298(d, (*n).Sons->data[i_288344], &tmp);
		res_288362 += 1;
	} LA2: ;
	{
		TY129263 LOC7;
		if (!!(((*d).Target == ((NU8) 1)))) goto LA5;
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = copyString(tmp);
		nsuAddf(result, frmta, LOC7, 1);
	}
	goto LA3;
	LA5: ;
	{
		TY129263 LOC9;
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = copyString(tmp);
		nsuAddf(result, frmtb, LOC9, 1);
	}
	LA3: ;
}

N_NIMCALL(NI, nextsplitpoint_288148)(NimStringDesc* s, NI start) {
	NI result;
	result = 0;
	result = start;
	while (1) {
		if (!(result < (NI64)(s->Sup.len + 0))) goto LA1;
		switch (((NU8)(s->data[result]))) {
		case 95:
		{
			goto BeforeRet;
		}
		break;
		case 97 ... 122:
		{
			{
				if (!((NI64)(result + 1) < (NI64)(s->Sup.len + 0))) goto LA6;
				{
					if (!(((NU8)(s->data[(NI64)(result + 1)])) >= ((NU8)(65)) && ((NU8)(s->data[(NI64)(result + 1)])) <= ((NU8)(90)))) goto LA10;
					goto BeforeRet;
				}
				LA10: ;
			}
			LA6: ;
		}
		break;
		default:
		{
		}
		break;
		}
		result += 1;
	} LA1: ;
	result -= 1;
	BeforeRet: ;
	return result;
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (NI64)((*a).Sup.len * 1));
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	BeforeRet: ;
	return result;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(void, addxmlchar_288116)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 38:
	{
		(*dest) = resizeString((*dest), 5);
appendString((*dest), ((NimStringDesc*) &TMP1902));
	}
	break;
	case 60:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP1903));
	}
	break;
	case 62:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP1904));
	}
	break;
	case 34:
	{
		(*dest) = resizeString((*dest), 6);
appendString((*dest), ((NimStringDesc*) &TMP1905));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

N_NIMCALL(void, addtexchar_288130)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 95:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP1906));
	}
	break;
	case 123:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP1907));
	}
	break;
	case 125:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP1908));
	}
	break;
	case 91:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1909));
	}
	break;
	case 93:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1910));
	}
	break;
	case 92:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1911));
	}
	break;
	case 36:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP1912));
	}
	break;
	case 38:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP1913));
	}
	break;
	case 35:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP1914));
	}
	break;
	case 37:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP1915));
	}
	break;
	case 126:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP1916));
	}
	break;
	case 64:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1917));
	}
	break;
	case 94:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1918));
	}
	break;
	case 96:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP1919));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

static N_INLINE(void, escchar_288140)(NU8 target, NimStringDesc** dest, NIM_CHAR c) {
	switch (target) {
	case ((NU8) 0):
	{
		addxmlchar_288116(dest, c);
	}
	break;
	case ((NU8) 1):
	{
		addtexchar_288130(dest, c);
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, esc_288194)(NU8 target, NimStringDesc* s, NI splitafter) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP1877));
	{
		NI partlen;
		NI j;
		if (!(0 <= splitafter)) goto LA3;
		partlen = 0;
		j = 0;
		while (1) {
			NI k;
			NI i_288215;
			NI res_288240;
			if (!(j < s->Sup.len)) goto LA5;
			k = nextsplitpoint_288148(s, j);
			{
				NIM_BOOL LOC8;
				LOC8 = !(eqStrings(splitter_288137, ((NimStringDesc*) &TMP1901)));
				if (LOC8) goto LA9;
				LOC8 = (splitafter < (NI64)((NI64)((NI64)(partlen + k) - j) + 1));
				LA9: ;
				if (!LOC8) goto LA10;
				partlen = 0;
				result = resizeString(result, splitter_288137->Sup.len + 0);
appendString(result, splitter_288137);
			}
			LA10: ;
			i_288215 = 0;
			res_288240 = j;
			while (1) {
				if (!(res_288240 <= k)) goto LA12;
				i_288215 = res_288240;
				escchar_288140(target, &result, s->data[i_288215]);
				res_288240 += 1;
			} LA12: ;
			partlen += (NI64)((NI64)(k - j) + 1);
			j = (NI64)(k + 1);
		} LA5: ;
	}
	goto LA1;
	LA3: ;
	{
		NI i_288237;
		NI HEX3Atmp_288242;
		NI res_288244;
		i_288237 = 0;
		HEX3Atmp_288242 = 0;
		HEX3Atmp_288242 = (NI64)(s->Sup.len - 1);
		res_288244 = 0;
		while (1) {
			if (!(res_288244 <= HEX3Atmp_288242)) goto LA14;
			i_288237 = res_288244;
			escchar_288140(target, &result, s->data[i_288237]);
			res_288244 += 1;
		} LA14: ;
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderfield_289077)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NIM_BOOL b;
	b = NIM_FALSE;
	{
		NimStringDesc* fieldname;
		NimStringDesc* fieldval;
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!((*d).Target == ((NU8) 1))) goto LA3;
		fieldname = addnodes_278052((*n).Sons->data[0]);
		LOC5 = 0;
		LOC5 = addnodes_278052((*n).Sons->data[1]);
		LOC6 = 0;
		LOC6 = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE);
		fieldval = esc_288194((*d).Target, LOC6, -1);
		{
			NIM_BOOL LOC9;
			NI LOC10;
			NI LOC12;
			LOC10 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP1920));
			LOC9 = (LOC10 == 0);
			if (LOC9) goto LA11;
			LOC12 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP1921));
			LOC9 = (LOC12 == 0);
			LA11: ;
			if (!LOC9) goto LA13;
			{
				if (!((*d).Meta[(((NU8) 3))- 0]->Sup.len == 0)) goto LA17;
				unsureAsgnRef((void**) &(*d).Meta[(((NU8) 3))- 0], copyString(fieldval));
				b = NIM_TRUE;
			}
			LA17: ;
		}
		goto LA7;
		LA13: ;
		{
			NI LOC20;
			LOC20 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP1922));
			if (!(LOC20 == 0)) goto LA21;
			{
				if (!((*d).Meta[(((NU8) 4))- 0]->Sup.len == 0)) goto LA25;
				unsureAsgnRef((void**) &(*d).Meta[(((NU8) 4))- 0], copyString(fieldval));
				b = NIM_TRUE;
			}
			LA25: ;
		}
		goto LA7;
		LA21: ;
		LA7: ;
	}
	LA3: ;
	{
		if (!!(b)) goto LA29;
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1923), ((NimStringDesc*) &TMP1924), result);
	}
	LA29: ;
}

N_NIMCALL(NimStringDesc*, texcolumns_289057)(trstnode277016* n) {
	NimStringDesc* result;
	NI i_289069;
	NI HEX3Atmp_289070;
	NI res_289072;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP1877));
	i_289069 = 0;
	HEX3Atmp_289070 = 0;
	HEX3Atmp_289070 = len_277087(n);
	res_289072 = 1;
	while (1) {
		if (!(res_289072 <= HEX3Atmp_289070)) goto LA1;
		i_289069 = res_289072;
		result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP1945));
		res_289072 += 1;
	} LA1: ;
	return result;
}

N_NIMCALL(NimStringDesc*, dispf_288265)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argslen0) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		result = nsuFormatOpenArray(xml, args, argslen0);
	}
	goto LA1;
	LA3: ;
	{
		result = nsuFormatOpenArray(tex, args, argslen0);
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderimage_288792)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NimStringDesc* options;
	NimStringDesc* s;
	TY105434 LOC31;
	options = copyString(((NimStringDesc*) &TMP1877));
	s = getfieldvalue_278056(n, ((NimStringDesc*) &TMP1960));
	{
		TY129263 LOC5;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA3;
		memset((void*)LOC5, 0, sizeof(LOC5));
		LOC5[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_288281((*d).Target, &options, ((NimStringDesc*) &TMP1961), ((NimStringDesc*) &TMP1962), LOC5, 1);
	}
	LA3: ;
	s = getfieldvalue_278056(n, ((NimStringDesc*) &TMP1963));
	{
		TY129263 LOC10;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA8;
		memset((void*)LOC10, 0, sizeof(LOC10));
		LOC10[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_288281((*d).Target, &options, ((NimStringDesc*) &TMP1964), ((NimStringDesc*) &TMP1965), LOC10, 1);
	}
	LA8: ;
	s = getfieldvalue_278056(n, ((NimStringDesc*) &TMP1966));
	{
		TY129263 LOC15;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA13;
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_288281((*d).Target, &options, ((NimStringDesc*) &TMP1967), ((NimStringDesc*) &TMP1968), LOC15, 1);
	}
	LA13: ;
	s = getfieldvalue_278056(n, ((NimStringDesc*) &TMP1969));
	{
		TY129263 LOC20;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA18;
		memset((void*)LOC20, 0, sizeof(LOC20));
		LOC20[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_288281((*d).Target, &options, ((NimStringDesc*) &TMP1970), ((NimStringDesc*) &TMP1877), LOC20, 1);
	}
	LA18: ;
	s = getfieldvalue_278056(n, ((NimStringDesc*) &TMP1971));
	{
		TY129263 LOC25;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA23;
		memset((void*)LOC25, 0, sizeof(LOC25));
		LOC25[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_288281((*d).Target, &options, ((NimStringDesc*) &TMP1972), ((NimStringDesc*) &TMP1877), LOC25, 1);
	}
	LA23: ;
	{
		TY129263 LOC30;
		if (!(0 < options->Sup.len)) goto LA28;
		memset((void*)LOC30, 0, sizeof(LOC30));
		LOC30[0] = copyString(options);
		options = dispf_288265((*d).Target, ((NimStringDesc*) &TMP1924), ((NimStringDesc*) &TMP1973), LOC30, 1);
	}
	LA28: ;
	memset((void*)LOC31, 0, sizeof(LOC31));
	LOC31[0] = getargument_278061(n);
	LOC31[1] = copyString(options);
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1974), ((NimStringDesc*) &TMP1975), LOC31, 2);
	{
		NI LOC34;
		LOC34 = len_277087(n);
		if (!(3 <= LOC34)) goto LA35;
		renderrsttoout_288298(d, (*n).Sons->data[2], result);
	}
	LA35: ;
}

N_NIMCALL(void, rendercodeblock_288849)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	trstnode277016* m;
	NimStringDesc* langstr;
	NimStringDesc* LOC5;
	NU8 lang;
	TY424073 LOC11;
	TY424073 LOC24;
	{
		if (!((*n).Sons->data[2] == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	m = (*(*n).Sons->data[2]).Sons->data[0];
	LOC5 = 0;
	LOC5 = getargument_278061(n);
	langstr = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE);
	lang = 0;
	{
		if (!((langstr) && (langstr)->Sup.len == 0)) goto LA8;
		lang = ((NU8) 1);
	}
	goto LA6;
	LA8: ;
	{
		lang = getsourcelanguage_284074(langstr);
	}
	LA6: ;
	memset((void*)LOC11, 0, sizeof(LOC11));
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1982), ((NimStringDesc*) &TMP1983), LOC11, 0);
	{
		if (!(lang == ((NU8) 0))) goto LA14;
		(*d).Msghandler((*d).Filename, 1, 0, ((NU8) 8), langstr);
		(*result) = resizeString((*result), (*m).Text->Sup.len + 0);
appendString((*result), (*m).Text);
	}
	goto LA12;
	LA14: ;
	{
		tgeneraltokenizer284011 g;
		memset((void*)&g, 0, sizeof(g));
		g.Sup.m_type = (&NTI284011);
		initgeneraltokenizer_284128(&g, (*m).Text);
		while (1) {
			getnexttoken_286667(&g, lang);
			switch (g.Kind) {
			case ((NU8) 0):
			{
				goto LA17;
			}
			break;
			case ((NU8) 1):
			case ((NU8) 2):
			{
				NimStringDesc* LOC20;
				LOC20 = 0;
				LOC20 = copyStrLast((*m).Text, g.Start, (NI64)((NI64)(g.Length + g.Start) - 1));
				(*result) = resizeString((*result), LOC20->Sup.len + 0);
appendString((*result), LOC20);
			}
			break;
			default:
			{
				TY105434 LOC22;
				NimStringDesc* LOC23;
				memset((void*)LOC22, 0, sizeof(LOC22));
				LOC23 = 0;
				LOC23 = copyStrLast((*m).Text, g.Start, (NI64)((NI64)(g.Length + g.Start) - 1));
				LOC22[0] = esc_288194((*d).Target, LOC23, -1);
				LOC22[1] = copyString(tokenclasstostr_284065[(g.Kind)- 0]);
				dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2144), ((NimStringDesc*) &TMP2145), LOC22, 2);
			}
			break;
			}
		} LA17: ;
		deinitgeneraltokenizer_284163(&g);
	}
	LA12: ;
	memset((void*)LOC24, 0, sizeof(LOC24));
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2179), ((NimStringDesc*) &TMP2180), LOC24, 0);
	BeforeRet: ;
}

N_NIMCALL(void, rendercontainer_289038)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* arg;
	NimStringDesc* LOC1;
	tmp = copyString(((NimStringDesc*) &TMP1877));
	renderrsttoout_288298(d, (*n).Sons->data[2], &tmp);
	LOC1 = 0;
	LOC1 = getargument_278061(n);
	arg = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
	{
		TY129263 LOC6;
		if (!((arg) && (arg)->Sup.len == 0)) goto LA4;
		memset((void*)LOC6, 0, sizeof(LOC6));
		LOC6[0] = copyString(tmp);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2181), ((NimStringDesc*) &TMP1924), LOC6, 1);
	}
	goto LA2;
	LA4: ;
	{
		TY105434 LOC8;
		memset((void*)LOC8, 0, sizeof(LOC8));
		LOC8[0] = copyString(arg);
		LOC8[1] = copyString(tmp);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2182), ((NimStringDesc*) &TMP2183), LOC8, 2);
	}
	LA2: ;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c) {
	(*dest).data[((*dest).Sup.len)- 0] = c;
	(*dest).data[((NI64)((*dest).Sup.len + 1))- 0] = 0;
	(*dest).Sup.len += 1;
}

static N_INLINE(NI, HEX21HEX26_101011)(NI h, NI val) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)(val));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(10))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(6)));
	return result;
}

static N_INLINE(NI, HEX21HEX24_101042)(NI h) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)((NI)((NU64)(h) << (NU64)(3))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(11)));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(15))));
	return result;
}

N_NIMCALL(NI, hash_288376)(trstnode277016* n) {
	NI result;
	result = 0;
	{
		if (!((*n).Kind == ((NU8) 64))) goto LA3;
		result = hash_101825((*n).Text);
	}
	goto LA1;
	LA3: ;
	{
		NI LOC6;
		NI i_288403;
		NI HEX3Atmp_288404;
		NI LOC9;
		NI res_288406;
		LOC6 = len_277087(n);
		if (!(0 < LOC6)) goto LA7;
		result = hash_288376((*n).Sons->data[0]);
		i_288403 = 0;
		HEX3Atmp_288404 = 0;
		LOC9 = len_277087(n);
		HEX3Atmp_288404 = LOC9 - 1;
		res_288406 = 1;
		while (1) {
			NI LOC11;
			if (!(res_288406 <= HEX3Atmp_288404)) goto LA10;
			i_288403 = res_288406;
			LOC11 = hash_288376((*n).Sons->data[i_288403]);
			result = HEX21HEX26_101011(result, LOC11);
			res_288406 += 1;
		} LA10: ;
		result = HEX21HEX24_101042(result);
	}
	goto LA1;
	LA7: ;
	LA1: ;
	return result;
}

N_NIMCALL(void, setindexterm_288368)(trstgenerator288012* d, NimStringDesc* id, NimStringDesc* term) {
	NimStringDesc* htmlfile;
	NimStringDesc* LOC1;
	(*d).Theindex = resizeString((*d).Theindex, term->Sup.len + 0);
appendString((*d).Theindex, term);
	(*d).Theindex = addChar((*d).Theindex, 9);
	LOC1 = 0;
	LOC1 = nosextractFilename((*d).Filename);
	htmlfile = noschangeFileExt(LOC1, ((NimStringDesc*) &TMP2195));
	(*d).Theindex = resizeString((*d).Theindex, htmlfile->Sup.len + 0);
appendString((*d).Theindex, htmlfile);
	(*d).Theindex = addChar((*d).Theindex, 35);
	(*d).Theindex = resizeString((*d).Theindex, id->Sup.len + 0);
appendString((*d).Theindex, id);
	(*d).Theindex = resizeString((*d).Theindex, 1);
appendString((*d).Theindex, ((NimStringDesc*) &TMP2196));
}

N_NIMCALL(void, renderindexterm_288411)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	NimStringDesc* id;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	NI LOC3;
	NimStringDesc* LOC4;
	NimStringDesc* term;
	TY105434 LOC5;
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = rstnodetorefname_278048(n);
	LOC3 = hash_288376(n);
	LOC4 = 0;
	LOC4 = nimIntToStr((NI64)abs(LOC3));
	LOC1 = rawNewString(LOC2->Sup.len + LOC4->Sup.len + 1);
appendString(LOC1, LOC2);
appendChar(LOC1, 95);
appendString(LOC1, LOC4);
	id = LOC1;
	term = copyString(((NimStringDesc*) &TMP1877));
	renderaux_288305(d, n, &term);
	setindexterm_288368(d, id, term);
	memset((void*)LOC5, 0, sizeof(LOC5));
	LOC5[0] = copyString(id);
	LOC5[1] = copyString(term);
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2197), ((NimStringDesc*) &TMP2198), LOC5, 2);
}

N_NIMCALL(void, rendersmiley_288837)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	TY129263 LOC1;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC1[0] = copyString((*n).Text);
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2201), ((NimStringDesc*) &TMP2202), LOC1, 1);
}

N_NIMCALL(void, renderrsttoout_288298)(trstgenerator288012* d, trstnode277016* n, NimStringDesc** result) {
	{
		if (!(n == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	switch ((*n).Kind) {
	case ((NU8) 0):
	{
		renderaux_288305(d, n, result);
	}
	break;
	case ((NU8) 1):
	{
		renderheadline_288609(d, n, result);
	}
	break;
	case ((NU8) 2):
	{
		renderoverline_288679(d, n, result);
	}
	break;
	case ((NU8) 3):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1884), ((NimStringDesc*) &TMP1885), result);
	}
	break;
	case ((NU8) 4):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1886), ((NimStringDesc*) &TMP1887), result);
	}
	break;
	case ((NU8) 5):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1888), ((NimStringDesc*) &TMP1889), result);
	}
	break;
	case ((NU8) 6):
	case ((NU8) 8):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1890), ((NimStringDesc*) &TMP1891), result);
	}
	break;
	case ((NU8) 7):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1892), ((NimStringDesc*) &TMP1893), result);
	}
	break;
	case ((NU8) 9):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1894), ((NimStringDesc*) &TMP1895), result);
	}
	break;
	case ((NU8) 10):
	{
		renderaux_288305(d, n, result);
	}
	break;
	case ((NU8) 11):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1896), ((NimStringDesc*) &TMP1897), result);
	}
	break;
	case ((NU8) 12):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1898), ((NimStringDesc*) &TMP1899), result);
	}
	break;
	case ((NU8) 13):
	{
		NimStringDesc* tmp;
		NI i_289120;
		NI HEX3Atmp_289176;
		NI LOC18;
		NI res_289178;
		tmp = copyString(((NimStringDesc*) &TMP1877));
		i_289120 = 0;
		HEX3Atmp_289176 = 0;
		LOC18 = len_277087(n);
		HEX3Atmp_289176 = (NI64)(LOC18 - 1);
		res_289178 = 0;
		while (1) {
			if (!(res_289178 <= HEX3Atmp_289176)) goto LA19;
			i_289120 = res_289178;
			renderrsttoout_288298(d, (*n).Sons->data[i_289120], &tmp);
			res_289178 += 1;
		} LA19: ;
		{
			TY129263 LOC24;
			if (!!((tmp->Sup.len == 0))) goto LA22;
			memset((void*)LOC24, 0, sizeof(LOC24));
			LOC24[0] = copyString(tmp);
			dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1900), ((NimStringDesc*) &TMP1895), LOC24, 1);
		}
		LA22: ;
	}
	break;
	case ((NU8) 14):
	{
		renderfield_289077(d, n, result);
	}
	break;
	case ((NU8) 15):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1925), ((NimStringDesc*) &TMP1926), result);
	}
	break;
	case ((NU8) 16):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1927), ((NimStringDesc*) &TMP1928), result);
	}
	break;
	case ((NU8) 51):
	{
		renderrsttoout_288298(d, (*n).Sons->data[2], result);
	}
	break;
	case ((NU8) 17):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1929), ((NimStringDesc*) &TMP1930), result);
	}
	break;
	case ((NU8) 18):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1923), ((NimStringDesc*) &TMP1924), result);
	}
	break;
	case ((NU8) 19):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1931), ((NimStringDesc*) &TMP1932), result);
	}
	break;
	case ((NU8) 23):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1933), ((NimStringDesc*) &TMP1928), result);
	}
	break;
	case ((NU8) 20):
	case ((NU8) 21):
	case ((NU8) 22):
	{
		{
			if (!NIM_TRUE) goto LA36;
			raiseassert_71089(((NimStringDesc*) &TMP1935));
		}
		LA36: ;
	}
	break;
	case ((NU8) 24):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1936), ((NimStringDesc*) &TMP1937), result);
	}
	break;
	case ((NU8) 25):
	{
		{
			if (!NIM_TRUE) goto LA42;
			raiseassert_71089(((NimStringDesc*) &TMP1935));
		}
		LA42: ;
	}
	break;
	case ((NU8) 26):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1938), ((NimStringDesc*) &TMP1887), result);
	}
	break;
	case ((NU8) 27):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1939), ((NimStringDesc*) &TMP1940), result);
	}
	break;
	case ((NU8) 28):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1941), ((NimStringDesc*) &TMP1942), result);
	}
	break;
	case ((NU8) 29):
	case ((NU8) 30):
	{
		NimStringDesc* LOC48;
		NimStringDesc* LOC49;
		LOC48 = 0;
		LOC49 = 0;
		LOC49 = texcolumns_289057(n);
		LOC48 = rawNewString(LOC49->Sup.len + 63);
appendString(LOC48, ((NimStringDesc*) &TMP1944));
appendString(LOC48, LOC49);
appendString(LOC48, ((NimStringDesc*) &TMP1946));
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1943), LOC48, result);
	}
	break;
	case ((NU8) 31):
	{
		{
			NI LOC53;
			LOC53 = len_277087(n);
			if (!(1 <= LOC53)) goto LA54;
			{
				NI i_289140;
				NI HEX3Atmp_289180;
				NI LOC60;
				NI res_289182;
				if (!((*d).Target == ((NU8) 1))) goto LA58;
				renderrsttoout_288298(d, (*n).Sons->data[0], result);
				i_289140 = 0;
				HEX3Atmp_289180 = 0;
				LOC60 = len_277087(n);
				HEX3Atmp_289180 = (NI64)(LOC60 - 1);
				res_289182 = 1;
				while (1) {
					if (!(res_289182 <= HEX3Atmp_289180)) goto LA61;
					i_289140 = res_289182;
					(*result) = resizeString((*result), 3);
appendString((*result), ((NimStringDesc*) &TMP1947));
					renderrsttoout_288298(d, (*n).Sons->data[i_289140], result);
					res_289182 += 1;
				} LA61: ;
				(*result) = resizeString((*result), 10);
appendString((*result), ((NimStringDesc*) &TMP1948));
			}
			goto LA56;
			LA58: ;
			{
				(*result) = resizeString((*result), 4);
appendString((*result), ((NimStringDesc*) &TMP1949));
				renderaux_288305(d, n, result);
				(*result) = resizeString((*result), 6);
appendString((*result), ((NimStringDesc*) &TMP1950));
			}
			LA56: ;
		}
		LA54: ;
	}
	break;
	case ((NU8) 33):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1927), ((NimStringDesc*) &TMP1924), result);
	}
	break;
	case ((NU8) 32):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1951), ((NimStringDesc*) &TMP1952), result);
	}
	break;
	case ((NU8) 34):
	{
		{
			if (!NIM_TRUE) goto LA68;
			raiseassert_71089(((NimStringDesc*) &TMP1935));
		}
		LA68: ;
	}
	break;
	case ((NU8) 35):
	{
		{
			if (!NIM_TRUE) goto LA73;
			raiseassert_71089(((NimStringDesc*) &TMP1935));
		}
		LA73: ;
	}
	break;
	case ((NU8) 36):
	{
		{
			if (!NIM_TRUE) goto LA78;
			raiseassert_71089(((NimStringDesc*) &TMP1935));
		}
		LA78: ;
	}
	break;
	case ((NU8) 39):
	{
		NimStringDesc* tmp;
		TY105434 LOC81;
		tmp = copyString(((NimStringDesc*) &TMP1877));
		renderaux_288305(d, n, &tmp);
		memset((void*)LOC81, 0, sizeof(LOC81));
		LOC81[0] = copyString(tmp);
		LOC81[1] = rstnodetorefname_278048(n);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1953), ((NimStringDesc*) &TMP1954), LOC81, 2);
	}
	break;
	case ((NU8) 37):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1955), ((NimStringDesc*) &TMP1956), result);
	}
	break;
	case ((NU8) 38):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY105434 LOC84;
		tmp0 = copyString(((NimStringDesc*) &TMP1877));
		tmp1 = copyString(((NimStringDesc*) &TMP1877));
		renderrsttoout_288298(d, (*n).Sons->data[0], &tmp0);
		renderrsttoout_288298(d, (*n).Sons->data[1], &tmp1);
		memset((void*)LOC84, 0, sizeof(LOC84));
		LOC84[0] = copyString(tmp0);
		LOC84[1] = copyString(tmp1);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP1957), ((NimStringDesc*) &TMP1958), LOC84, 2);
	}
	break;
	case ((NU8) 41):
	case ((NU8) 42):
	{
		renderaux_288305(d, n, result);
	}
	break;
	case ((NU8) 48):
	{
		{
			trstnode277016* LOC91;
			NimStringDesc* LOC92;
			if (!!(((*d).Target == ((NU8) 1)))) goto LA89;
			LOC91 = 0;
			LOC91 = lastson_277148(n);
			LOC92 = 0;
			LOC92 = addnodes_278052(LOC91);
			(*result) = resizeString((*result), LOC92->Sup.len + 0);
appendString((*result), LOC92);
		}
		LA89: ;
	}
	break;
	case ((NU8) 49):
	{
		{
			trstnode277016* LOC98;
			NimStringDesc* LOC99;
			if (!((*d).Target == ((NU8) 1))) goto LA96;
			LOC98 = 0;
			LOC98 = lastson_277148(n);
			LOC99 = 0;
			LOC99 = addnodes_278052(LOC98);
			(*result) = resizeString((*result), LOC99->Sup.len + 0);
appendString((*result), LOC99);
		}
		LA96: ;
	}
	break;
	case ((NU8) 45):
	case ((NU8) 46):
	{
		renderimage_288792(d, n, result);
	}
	break;
	case ((NU8) 47):
	{
		rendercodeblock_288849(d, n, result);
	}
	break;
	case ((NU8) 50):
	{
		rendercontainer_289038(d, n, result);
	}
	break;
	case ((NU8) 62):
	case ((NU8) 52):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2184), ((NimStringDesc*) &TMP2184), result);
	}
	break;
	case ((NU8) 40):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP1877), ((NimStringDesc*) &TMP1877), result);
	}
	break;
	case ((NU8) 53):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY105434 LOC106;
		tmp0 = copyString(((NimStringDesc*) &TMP1877));
		tmp1 = copyString(((NimStringDesc*) &TMP1877));
		renderrsttoout_288298(d, (*n).Sons->data[0], &tmp0);
		renderrsttoout_288298(d, (*n).Sons->data[1], &tmp1);
		memset((void*)LOC106, 0, sizeof(LOC106));
		LOC106[0] = copyString(tmp0);
		LOC106[1] = copyString(tmp1);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP2144), ((NimStringDesc*) &TMP2145), LOC106, 2);
	}
	break;
	case ((NU8) 54):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2185), ((NimStringDesc*) &TMP2186), result);
	}
	break;
	case ((NU8) 55):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2187), ((NimStringDesc*) &TMP2188), result);
	}
	break;
	case ((NU8) 57):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2189), ((NimStringDesc*) &TMP2190), result);
	}
	break;
	case ((NU8) 58):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2191), ((NimStringDesc*) &TMP1952), result);
	}
	break;
	case ((NU8) 59):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2192), ((NimStringDesc*) &TMP2193), result);
	}
	break;
	case ((NU8) 60):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2194), ((NimStringDesc*) &TMP2190), result);
	}
	break;
	case ((NU8) 56):
	{
		renderindexterm_288411(d, n, result);
	}
	break;
	case ((NU8) 61):
	{
		renderaux_288327(d, n, ((NimStringDesc*) &TMP2199), ((NimStringDesc*) &TMP2200), result);
	}
	break;
	case ((NU8) 63):
	{
		rendersmiley_288837(d, n, result);
	}
	break;
	case ((NU8) 64):
	{
		NimStringDesc* LOC117;
		LOC117 = 0;
		LOC117 = esc_288194((*d).Target, (*n).Text, -1);
		(*result) = resizeString((*result), LOC117->Sup.len + 0);
appendString((*result), LOC117);
	}
	break;
	case ((NU8) 44):
	{
		(*d).Hastoc = NIM_TRUE;
	}
	break;
	case ((NU8) 43):
	{
		unsureAsgnRef((void**) &(*d).Meta[(((NU8) 1))- 0], copyString(((NimStringDesc*) &TMP1877)));
		renderrsttoout_288298(d, (*n).Sons->data[0], &(*d).Meta[(((NU8) 1))- 0]);
	}
	break;
	}
	BeforeRet: ;
}
N_NIMCALL(void, TMP4012)(void* p, NI op) {
	TY288028* a;
	NI LOC1;
	a = (TY288028*)p;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].N, op);
	nimGCvisit((void*)a->data[LOC1].Refname, op);
	nimGCvisit((void*)a->data[LOC1].Header, op);
	}
}

N_NIMCALL(void, initrstgenerator_288040)(trstgenerator288012* g, NU8 target, tstringtable103609* config, NimStringDesc* filename, NU8 options, tfindfilehandler278016 findfile, tmsghandler278014 msghandler) {
	NimStringDesc* s;
	NU8 i_288100;
	NU8 res_288102;
	unsureAsgnRef((void**) &(*g).Config, config);
	(*g).Target = target;
	unsureAsgnRef((void**) &(*g).Tocpart, (TY288028*) newSeq((&NTI288028), 0));
	unsureAsgnRef((void**) &(*g).Filename, copyString(filename));
	(*g).Splitafter = 20;
	unsureAsgnRef((void**) &(*g).Theindex, copyString(((NimStringDesc*) &TMP1877)));
	(*g).Options = options;
	(*g).Findfile = findfile;
	(*g).Msghandler = msghandler;
	s = nstGet(config, ((NimStringDesc*) &TMP4015));
	{
		if (!!(((s) && (s)->Sup.len == 0))) goto LA3;
		(*g).Splitafter = nsuParseInt(s);
	}
	LA3: ;
	i_288100 = 0;
	res_288102 = ((NU8) 0);
	while (1) {
		if (!(res_288102 <= ((NU8) 4))) goto LA5;
		i_288100 = res_288102;
		unsureAsgnRef((void**) &(*g).Meta[(i_288100)- 0], copyString(((NimStringDesc*) &TMP1877)));
		res_288102 += 1;
	} LA5: ;
}

N_NIMCALL(void, rendertocentry_288745)(trstgenerator288012* d, ttocentry288008* e, NimStringDesc** result) {
	TY105434 LOC1;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC1[0] = copyString((*e).Refname);
	LOC1[1] = copyString((*e).Header);
	dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP4051), ((NimStringDesc*) &TMP4052), LOC1, 2);
}

N_NIMCALL(void, rendertocentries_288757)(trstgenerator288012* d, NI* j, NI lvl, NimStringDesc** result) {
	NimStringDesc* tmp;
	tmp = copyString(((NimStringDesc*) &TMP1877));
	while (1) {
		NI a;
		if (!((*j) <= ((*d).Tocpart->Sup.len-1))) goto LA1;
		a = (NI64)abs((*(*d).Tocpart->data[(*j)].N).Level);
		{
			if (!(a == lvl)) goto LA4;
			rendertocentry_288745(d, &(*d).Tocpart->data[(*j)], &tmp);
			(*j) += 1;
		}
		goto LA2;
		LA4: ;
		{
			if (!(lvl < a)) goto LA7;
			rendertocentries_288757(d, j, a, &tmp);
		}
		goto LA2;
		LA7: ;
		{
			goto LA1;
		}
		LA2: ;
	} LA1: ;
	{
		TY129263 LOC14;
		if (!(1 < lvl)) goto LA12;
		memset((void*)LOC14, 0, sizeof(LOC14));
		LOC14[0] = copyString(tmp);
		dispa_288281((*d).Target, result, ((NimStringDesc*) &TMP4053), ((NimStringDesc*) &TMP4054), LOC14, 1);
	}
	goto LA10;
	LA12: ;
	{
		(*result) = resizeString((*result), tmp->Sup.len + 0);
appendString((*result), tmp);
	}
	LA10: ;
}

N_NIMCALL(void, writeindexfile_288107)(trstgenerator288012* g, NimStringDesc* outfile) {
	{
		if (!(0 < (*g).Theindex->Sup.len)) goto LA3;
		writefile_9042(outfile, (*g).Theindex);
	}
	LA3: ;
}
N_NIMCALL(void, TMP4102)(void* p, NI op) {
	TY288490* a;
	NI LOC1;
	a = (TY288490*)p;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Keyword, op);
	nimGCvisit((void*)a->data[LOC1].Link, op);
	}
}

N_NIMCALL(void, HEX3CHEX2D_288438)(tindexentry288427* a, tindexentry288427 b) {
	unsureAsgnRef((void**) &(*a).Keyword, b.Keyword);
	unsureAsgnRef((void**) &(*a).Link, b.Link);
}

N_NIMCALL(NI, cmp_288431)(tindexentry288427 a, tindexentry288427 b) {
	NI result;
	result = 0;
	result = nsuCmpIgnoreStyle(a.Keyword, b.Keyword);
	return result;
}

N_NIMCALL(void, sortindex_288445)(tindexentry288427* a, NI alen0) {
	NI n;
	NI h;
	n = alen0;
	h = 1;
	while (1) {
		h = (NI64)((NI64)(3 * h) + 1);
		{
			if (!(n < h)) goto LA4;
			goto LA1;
		}
		LA4: ;
	} LA1: ;
	while (1) {
		NI i_288467;
		NI HEX3Atmp_288476;
		NI res_288478;
		h = (NI64)(h / 3);
		i_288467 = 0;
		HEX3Atmp_288476 = 0;
		HEX3Atmp_288476 = (NI64)(n - 1);
		res_288478 = h;
		while (1) {
			tindexentry288427 v;
			NI j;
			if (!(res_288478 <= HEX3Atmp_288476)) goto LA7;
			i_288467 = res_288478;
			memset((void*)&v, 0, sizeof(v));
			HEX3CHEX2D_288438(&v, a[i_288467]);
			j = i_288467;
			while (1) {
				NI LOC9;
				LOC9 = cmp_288431(a[(NI64)(j - h)], v);
				if (!(0 <= LOC9)) goto LA8;
				HEX3CHEX2D_288438(&a[j], a[(NI64)(j - h)]);
				j = (NI64)(j - h);
				{
					if (!(j < h)) goto LA12;
					goto LA8;
				}
				LA12: ;
			} LA8: ;
			HEX3CHEX2D_288438(&a[j], v);
			res_288478 += 1;
		} LA7: ;
		{
			if (!(h == 1)) goto LA16;
			goto LA6;
		}
		LA16: ;
	} LA6: ;
}

N_NIMCALL(NimStringDesc*, mergeindexes_288486)(NimStringDesc* dir) {
	NimStringDesc* result;
	TY288490* a;
	NI l;
	NU8 kind_288519;
	NimStringDesc* path_288520;
	DIR* d_288592;
	NI i;
	result = 0;
	a = 0;
	a = (TY288490*) newSeq((&NTI288490), 15000);
	a = (TY288490*) setLengthSeq(&(a)->Sup, sizeof(tindexentry288427), 0);
	l = 0;
	kind_288519 = 0;
	path_288520 = 0;
	d_288592 = opendir(dir->data);
	{
		int LOC44;
		if (!!((d_288592 == NIM_NIL))) goto LA3;
		while (1) {
			struct dirent* x_288594;
			NimStringDesc* y_288596;
			x_288594 = readdir(d_288592);
			{
				if (!(x_288594 == NIM_NIL)) goto LA8;
				goto LA5;
			}
			LA8: ;
			y_288596 = cstrToNimstr(((NCSTRING) ((*x_288594).d_name)));
			{
				NIM_BOOL LOC12;
				struct stat s_288598;
				NU8 k_288600;
				LOC12 = !(eqStrings(y_288596, ((NimStringDesc*) &TMP4103)));
				if (!(LOC12)) goto LA13;
				LOC12 = !(eqStrings(y_288596, ((NimStringDesc*) &TMP4104)));
				LA13: ;
				if (!LOC12) goto LA14;
				memset((void*)&s_288598, 0, sizeof(s_288598));
				y_288596 = HEX2F_94062(dir, y_288596);
				{
					int LOC18;
					LOC18 = lstat(y_288596->data, &s_288598);
					if (!(LOC18 < ((NI32) 0))) goto LA19;
					goto LA5;
				}
				LA19: ;
				k_288600 = ((NU8) 0);
				{
					NIM_BOOL LOC23;
					LOC23 = S_ISDIR(s_288598.st_mode);
					if (!LOC23) goto LA24;
					k_288600 = ((NU8) 2);
				}
				LA24: ;
				{
					NIM_BOOL LOC28;
					LOC28 = S_ISLNK(s_288598.st_mode);
					if (!LOC28) goto LA29;
					k_288600 = k_288600 + 1;
				}
				LA29: ;
				kind_288519 = k_288600;
				path_288520 = y_288596;
				{
					NIM_BOOL LOC33;
					NimStringDesc* line_288527;
					FILE* f_288587;
					NimStringDesc* res_288589;
					LOC33 = (kind_288519 == ((NU8) 0));
					if (!(LOC33)) goto LA34;
					LOC33 = nsuEndsWith(path_288520, ((NimStringDesc*) &TMP4105));
					LA34: ;
					if (!LOC33) goto LA35;
					line_288527 = 0;
					f_288587 = open_8832(path_288520, ((NU8) 0), -1);
					res_288589 = rawNewString(80);
					while (1) {
						NIM_BOOL LOC38;
						LOC38 = readline_9086(f_288587, &res_288589);
						if (!LOC38) goto LA37;
						line_288527 = res_288589;
						{
							NI s;
							s = nsuFindChar(line_288527, 9, 0);
							{
								if (!(s < 0)) goto LA42;
								goto LA39;
							}
							LA42: ;
							a = (TY288490*) setLengthSeq(&(a)->Sup, sizeof(tindexentry288427), (NI64)(l + 1));
							asgnRefNoCycle((void**) &a->data[l].Keyword, copyStrLast(line_288527, 0, (NI64)(s - 1)));
							asgnRefNoCycle((void**) &a->data[l].Link, copyStr(line_288527, (NI64)(s + 1)));
							l += 1;
						} LA39: ;
					} LA37: ;
					fclose(f_288587);
				}
				LA35: ;
			}
			LA14: ;
		} LA5: ;
		LOC44 = closedir(d_288592);
	}
	LA3: ;
	sortindex_288445(a->data, a->Sup.len);
	result = copyString(((NimStringDesc*) &TMP1877));
	i = 0;
	while (1) {
		TY129263 LOC46;
		NI j;
		if (!(i < l)) goto LA45;
		memset((void*)LOC46, 0, sizeof(LOC46));
		LOC46[0] = copyString(a->data[i].Keyword);
		nsuAddf(&result, ((NimStringDesc*) &TMP4106), LOC46, 1);
		j = i;
		while (1) {
			NIM_BOOL LOC48;
			TY129263 LOC50;
			LOC48 = (j < l);
			if (!(LOC48)) goto LA49;
			LOC48 = eqStrings(a->data[i].Keyword, a->data[j].Keyword);
			LA49: ;
			if (!LOC48) goto LA47;
			memset((void*)LOC50, 0, sizeof(LOC50));
			LOC50[0] = copyString(a->data[j].Link);
			nsuAddf(&result, ((NimStringDesc*) &TMP4107), LOC50, 1);
			j += 1;
		} LA47: ;
		result = resizeString(result, 11);
appendString(result, ((NimStringDesc*) &TMP4108));
		i = j;
	} LA45: ;
	return result;
}
N_NOINLINE(void, rstgenInit)(void) {
	NimStringDesc* LOC1;
	LOC1 = 0;
	LOC1 = splitter_288137; splitter_288137 = copyStringRC1(((NimStringDesc*) &TMP874));
	if (LOC1) nimGCunrefNoCycle(LOC1);
}

N_NOINLINE(void, rstgenDatInit)(void) {
static TNimNode* TMP4007[11];
static TNimNode* TMP4008[2];
NI TMP4010;
static char* NIM_CONST TMP4009[2] = {
"outHtml", 
"outLatex"};
static TNimNode* TMP4011[3];
static TNimNode* TMP4101[2];
static TNimNode TMP870[22];
NTI288012.size = sizeof(trstgenerator288012);
NTI288012.kind = 17;
NTI288012.base = (&NTI1009);
NTI288012.flags = 2;
TMP4007[0] = &TMP870[1];
NTI288006.size = sizeof(NU8);
NTI288006.kind = 14;
NTI288006.base = 0;
NTI288006.flags = 3;
for (TMP4010 = 0; TMP4010 < 2; TMP4010++) {
TMP870[TMP4010+2].kind = 1;
TMP870[TMP4010+2].offset = TMP4010;
TMP870[TMP4010+2].name = TMP4009[TMP4010];
TMP4008[TMP4010] = &TMP870[TMP4010+2];
}
TMP870[4].len = 2; TMP870[4].kind = 2; TMP870[4].sons = &TMP4008[0];
NTI288006.node = &TMP870[4];
TMP870[1].kind = 1;
TMP870[1].offset = offsetof(trstgenerator288012, Target);
TMP870[1].typ = (&NTI288006);
TMP870[1].name = "target";
TMP4007[1] = &TMP870[5];
TMP870[5].kind = 1;
TMP870[5].offset = offsetof(trstgenerator288012, Config);
TMP870[5].typ = (&NTI103611);
TMP870[5].name = "config";
TMP4007[2] = &TMP870[6];
TMP870[6].kind = 1;
TMP870[6].offset = offsetof(trstgenerator288012, Splitafter);
TMP870[6].typ = (&NTI105);
TMP870[6].name = "splitAfter";
TMP4007[3] = &TMP870[7];
NTI288008.size = sizeof(ttocentry288008);
NTI288008.kind = 18;
NTI288008.base = 0;
NTI288008.flags = 2;
TMP4011[0] = &TMP870[9];
TMP870[9].kind = 1;
TMP870[9].offset = offsetof(ttocentry288008, N);
TMP870[9].typ = (&NTI277012);
TMP870[9].name = "n";
TMP4011[1] = &TMP870[10];
TMP870[10].kind = 1;
TMP870[10].offset = offsetof(ttocentry288008, Refname);
TMP870[10].typ = (&NTI143);
TMP870[10].name = "refname";
TMP4011[2] = &TMP870[11];
TMP870[11].kind = 1;
TMP870[11].offset = offsetof(ttocentry288008, Header);
TMP870[11].typ = (&NTI143);
TMP870[11].name = "header";
TMP870[8].len = 3; TMP870[8].kind = 2; TMP870[8].sons = &TMP4011[0];
NTI288008.node = &TMP870[8];
NTI288028.size = sizeof(TY288028*);
NTI288028.kind = 24;
NTI288028.base = (&NTI288008);
NTI288028.flags = 2;
NTI288028.marker = TMP4012;
TMP870[7].kind = 1;
TMP870[7].offset = offsetof(trstgenerator288012, Tocpart);
TMP870[7].typ = (&NTI288028);
TMP870[7].name = "tocPart";
TMP4007[4] = &TMP870[12];
TMP870[12].kind = 1;
TMP870[12].offset = offsetof(trstgenerator288012, Hastoc);
TMP870[12].typ = (&NTI132);
TMP870[12].name = "hasToc";
TMP4007[5] = &TMP870[13];
TMP870[13].kind = 1;
TMP870[13].offset = offsetof(trstgenerator288012, Theindex);
TMP870[13].typ = (&NTI143);
TMP870[13].name = "theIndex";
TMP4007[6] = &TMP870[14];
TMP870[14].kind = 1;
TMP870[14].offset = offsetof(trstgenerator288012, Options);
TMP870[14].typ = (&NTI278008);
TMP870[14].name = "options";
TMP4007[7] = &TMP870[15];
TMP870[15].kind = 1;
TMP870[15].offset = offsetof(trstgenerator288012, Findfile);
TMP870[15].typ = (&NTI278016);
TMP870[15].name = "findFile";
TMP4007[8] = &TMP870[16];
TMP870[16].kind = 1;
TMP870[16].offset = offsetof(trstgenerator288012, Msghandler);
TMP870[16].typ = (&NTI278014);
TMP870[16].name = "msgHandler";
TMP4007[9] = &TMP870[17];
TMP870[17].kind = 1;
TMP870[17].offset = offsetof(trstgenerator288012, Filename);
TMP870[17].typ = (&NTI143);
TMP870[17].name = "filename";
TMP4007[10] = &TMP870[18];
NTI288036.size = sizeof(TY288036);
NTI288036.kind = 16;
NTI288036.base = (&NTI143);
NTI288036.flags = 2;
TMP870[18].kind = 1;
TMP870[18].offset = offsetof(trstgenerator288012, Meta);
TMP870[18].typ = (&NTI288036);
TMP870[18].name = "meta";
TMP870[0].len = 11; TMP870[0].kind = 2; TMP870[0].sons = &TMP4007[0];
NTI288012.node = &TMP870[0];
NTI288427.size = sizeof(tindexentry288427);
NTI288427.kind = 18;
NTI288427.base = 0;
NTI288427.flags = 2;
TMP4101[0] = &TMP870[20];
TMP870[20].kind = 1;
TMP870[20].offset = offsetof(tindexentry288427, Keyword);
TMP870[20].typ = (&NTI143);
TMP870[20].name = "keyword";
TMP4101[1] = &TMP870[21];
TMP870[21].kind = 1;
TMP870[21].offset = offsetof(tindexentry288427, Link);
TMP870[21].typ = (&NTI143);
TMP870[21].name = "link";
TMP870[19].len = 2; TMP870[19].kind = 2; TMP870[19].sons = &TMP4101[0];
NTI288427.node = &TMP870[19];
NTI288490.size = sizeof(TY288490*);
NTI288490.kind = 24;
NTI288490.base = (&NTI288427);
NTI288490.flags = 2;
NTI288490.marker = TMP4102;
}

