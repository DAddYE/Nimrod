/* Generated by Nimrod Compiler v0.9.3 */
/*   (c) 2012 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: MacOSX, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -O3 -fno-strict-aliasing  -I/usr/src/extras/Nimrod/lib -o compiler/nimcache/rodutils.o compiler/nimcache/rodutils.c */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
struct TGenericSeq {
NI len;
NI reserved;
};
typedef NIM_CHAR TY611[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY611 data;
};
typedef NIM_CHAR TY141017[81];
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, hexchar_141052)(NIM_CHAR c, NI* xi);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(void, encodevintaux_141195)(NI x, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING str);
static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuToHex)(NI64 x, NI len);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
N_NIMCALL(void, encodevbiggestintaux_141155)(NI64 x, NimStringDesc** result);
STRING_LITERAL(TMP1667, "", 0);
STRING_LITERAL(TMP1687, "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", 62);
STRING_LITERAL(TMP3034, "NAN", 3);
STRING_LITERAL(TMP3035, "0.0", 3);
STRING_LITERAL(TMP3036, "INF", 3);
STRING_LITERAL(TMP3037, "-INF", 4);

N_NIMCALL(NI, decodevint_141251)(NCSTRING s, NI* pos) {
	NI result;
	NI i_141258;
	NI sign_141260;
	result = 0;
	i_141258 = (*pos);
	sign_141260 = -1;
	{
		if (!((NU8)(s[i_141258]) == (NU8)(45))) goto LA3;
		i_141258 += 1;
		sign_141260 = 1;
	}
	LA3: ;
	result = 0;
	while (1) {
		switch (((NU8)(s[i_141258]))) {
		case 48 ... 57:
		{
			result = (NI64)((NI64)(result * 190) - ((NI) ((NI64)(((NI) (((NU8)(s[i_141258])))) - 48))));
		}
		break;
		case 97 ... 122:
		{
			result = (NI64)((NI64)(result * 190) - ((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141258])))) - 97))) + 10))));
		}
		break;
		case 65 ... 90:
		{
			result = (NI64)((NI64)(result * 190) - ((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141258])))) - 65))) + 36))));
		}
		break;
		case 128 ... 255:
		{
			result = (NI64)((NI64)(result * 190) - ((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141258])))) - 128))) + 62))));
		}
		break;
		default:
		{
			goto LA5;
		}
		break;
		}
		i_141258 += 1;
	} LA5: ;
	result = (NI)((NU64)((NI64)(result * sign_141260)) - (NU64)(5));
	(*pos) = i_141258;
	return result;
}

N_NIMCALL(void, hexchar_141052)(NIM_CHAR c, NI* xi) {
	switch (((NU8)(c))) {
	case 48 ... 57:
	{
		(*xi) = (NI)((NI)((NU64)((*xi)) << (NU64)(4)) | ((NI) ((NI64)(((NI) (((NU8)(c)))) - 48))));
	}
	break;
	case 97 ... 102:
	{
		(*xi) = (NI)((NI)((NU64)((*xi)) << (NU64)(4)) | ((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(c)))) - 97))) + 10))));
	}
	break;
	case 65 ... 70:
	{
		(*xi) = (NI)((NI)((NU64)((*xi)) << (NU64)(4)) | ((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(c)))) - 65))) + 10))));
	}
	break;
	default:
	{
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, decodestr_141104)(NCSTRING s, NI* pos) {
	NimStringDesc* result;
	NI i;
	result = 0;
	i = (*pos);
	result = copyString(((NimStringDesc*) &TMP1667));
	while (1) {
		switch (((NU8)(s[i]))) {
		case 92:
		{
			NI xi;
			i += 3;
			xi = 0;
			hexchar_141052(s[(NI64)(i - 2)], &xi);
			hexchar_141052(s[(NI64)(i - 1)], &xi);
			result = addChar(result, ((NIM_CHAR) (((NI) (xi)))));
		}
		break;
		case 97 ... 122:
		case 65 ... 90:
		case 48 ... 57:
		case 95:
		{
			result = addChar(result, s[i]);
			i += 1;
		}
		break;
		default:
		{
			goto LA1;
		}
		break;
		}
	} LA1: ;
	(*pos) = i;
	return result;
}

N_NIMCALL(void, encodevintaux_141195)(NI x, NimStringDesc** result) {
	NIM_CHAR d_141201;
	NI v_141203;
	NI rem_141205;
	NI idx_141207;
	d_141201 = 0;
	v_141203 = x;
	rem_141205 = (NI64)(v_141203 % 190);
	{
		if (!(((NI) (rem_141205)) < 0)) goto LA3;
		(*result) = addChar((*result), 45);
		v_141203 = ((NI64)-((NI64)(v_141203 / 190)));
		rem_141205 = ((NI64)-(((NI) (rem_141205))));
	}
	goto LA1;
	LA3: ;
	{
		v_141203 = (NI64)(v_141203 / 190);
	}
	LA1: ;
	idx_141207 = ((NI) (rem_141205));
	{
		if (!(idx_141207 < 62)) goto LA8;
		d_141201 = ((NimStringDesc*) &TMP1687)->data[idx_141207];
	}
	goto LA6;
	LA8: ;
	{
		d_141201 = ((NIM_CHAR) (((NI) ((NI64)((NI64)(idx_141207 - 62) + 128)))));
	}
	LA6: ;
	{
		if (!!((v_141203 == 0))) goto LA13;
		encodevintaux_141195(v_141203, result);
	}
	LA13: ;
	(*result) = addChar((*result), d_141201);
}

N_NIMCALL(void, encodevint_141226)(NI x, NimStringDesc** result) {
	encodevintaux_141195((NI)((NU64)(x) + (NU64)(5)), result);
}

N_NIMCALL(NI64, decodevbiggestint_141505)(NCSTRING s, NI* pos) {
	NI64 result;
	NI i_141512;
	NI sign_141514;
	result = 0;
	i_141512 = (*pos);
	sign_141514 = -1;
	{
		if (!((NU8)(s[i_141512]) == (NU8)(45))) goto LA3;
		i_141512 += 1;
		sign_141514 = 1;
	}
	LA3: ;
	result = 0;
	while (1) {
		switch (((NU8)(s[i_141512]))) {
		case 48 ... 57:
		{
			result = (NI64)((NI64)(result * 190) - ((NI64) ((NI64)(((NI) (((NU8)(s[i_141512])))) - 48))));
		}
		break;
		case 97 ... 122:
		{
			result = (NI64)((NI64)(result * 190) - ((NI64) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141512])))) - 97))) + 10))));
		}
		break;
		case 65 ... 90:
		{
			result = (NI64)((NI64)(result * 190) - ((NI64) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141512])))) - 65))) + 36))));
		}
		break;
		case 128 ... 255:
		{
			result = (NI64)((NI64)(result * 190) - ((NI64) ((NI64)(((NI) ((NI64)(((NI) (((NU8)(s[i_141512])))) - 128))) + 62))));
		}
		break;
		default:
		{
			goto LA5;
		}
		break;
		}
		i_141512 += 1;
	} LA5: ;
	result = (NI64)((NU64)((NI64)(result * ((NI64) (sign_141514)))) - (NU64)(5));
	(*pos) = i_141512;
	return result;
}

N_NIMCALL(NimStringDesc*, tostrmaxprecision_141013)(NF64 f) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((((NF) (f)) == ((NF) (f))))) goto LA3;
		result = copyString(((NimStringDesc*) &TMP3034));
	}
	goto LA1;
	LA3: ;
	{
		if (!(((NF) (f)) == 0.0)) goto LA6;
		result = copyString(((NimStringDesc*) &TMP3035));
	}
	goto LA1;
	LA6: ;
	{
		if (!(((NF) (f)) == (5.0000000000000000e-01 * ((NF) (f))))) goto LA9;
		{
			if (!(0.0 < ((NF) (f)))) goto LA13;
			result = copyString(((NimStringDesc*) &TMP3036));
		}
		goto LA11;
		LA13: ;
		{
			result = copyString(((NimStringDesc*) &TMP3037));
		}
		LA11: ;
	}
	goto LA1;
	LA9: ;
	{
		TY141017 buf;
		memset((void*)buf, 0, sizeof(buf));
		sprintf(((NCSTRING) (buf)), "%#.16e", f);
		result = cstrToNimstr(((NCSTRING) (buf)));
	}
	LA1: ;
	return result;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c) {
	(*dest).data[((*dest).Sup.len)- 0] = c;
	(*dest).data[((NI64)((*dest).Sup.len + 1))- 0] = 0;
	(*dest).Sup.len += 1;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(void, encodestr_141025)(NimStringDesc* s, NimStringDesc** result) {
	NI i_141038;
	NI HEX3Atmp_141045;
	NI res_141047;
	i_141038 = 0;
	HEX3Atmp_141045 = 0;
	HEX3Atmp_141045 = (NI64)(s->Sup.len - 1);
	res_141047 = 0;
	while (1) {
		if (!(res_141047 <= HEX3Atmp_141045)) goto LA1;
		i_141038 = res_141047;
		switch (((NU8)(s->data[i_141038]))) {
		case 97 ... 122:
		case 65 ... 90:
		case 48 ... 57:
		case 95:
		{
			(*result) = addChar((*result), s->data[i_141038]);
		}
		break;
		default:
		{
			NimStringDesc* LOC4;
			NimStringDesc* LOC5;
			LOC4 = 0;
			LOC5 = 0;
			LOC5 = nsuToHex(((NI64) (((NU8)(s->data[i_141038])))), 2);
			LOC4 = rawNewString(LOC5->Sup.len + 1);
appendChar(LOC4, 92);
appendString(LOC4, LOC5);
			(*result) = resizeString((*result), LOC4->Sup.len + 0);
appendString((*result), LOC4);
		}
		break;
		}
		res_141047 += 1;
	} LA1: ;
}

N_NIMCALL(void, encodevbiggestintaux_141155)(NI64 x, NimStringDesc** result) {
	NIM_CHAR d_141161;
	NI64 v_141163;
	NI64 rem_141165;
	NI idx_141167;
	d_141161 = 0;
	v_141163 = x;
	rem_141165 = (NI64)(v_141163 % 190);
	{
		if (!(((NI) (rem_141165)) < 0)) goto LA3;
		(*result) = addChar((*result), 45);
		v_141163 = -((NI64)(v_141163 / 190));
		rem_141165 = -(((NI64) (rem_141165)));
	}
	goto LA1;
	LA3: ;
	{
		v_141163 = (NI64)(v_141163 / 190);
	}
	LA1: ;
	idx_141167 = ((NI) (rem_141165));
	{
		if (!(idx_141167 < 62)) goto LA8;
		d_141161 = ((NimStringDesc*) &TMP1687)->data[idx_141167];
	}
	goto LA6;
	LA8: ;
	{
		d_141161 = ((NIM_CHAR) (((NI) ((NI64)((NI64)(idx_141167 - 62) + 128)))));
	}
	LA6: ;
	{
		if (!!((v_141163 == 0))) goto LA13;
		encodevbiggestintaux_141155(v_141163, result);
	}
	LA13: ;
	(*result) = addChar((*result), d_141161);
}

N_NIMCALL(void, encodevbiggestint_141188)(NI64 x, NimStringDesc** result) {
	encodevbiggestintaux_141155((NI64)((NU64)(x) + (NU64)(5)), result);
}
N_NOINLINE(void, rodutilsInit)(void) {
}

N_NOINLINE(void, rodutilsDatInit)(void) {
}

