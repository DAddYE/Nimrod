/* Generated by Nimrod Compiler v0.9.3 */
/*   (c) 2012 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: MacOSX, amd64, gcc */
/* Command for C compiler:
   gcc -c  -w -O3 -fno-strict-aliasing  -I/usr/src/extras/Nimrod/lib -o compiler/nimcache/json.o compiler/nimcache/json.c */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>
typedef struct tjsonnode414839 tjsonnode414839;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY414854 TY414854;
typedef struct TY414855 TY414855;
typedef struct TY414859 TY414859;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct tcell38449 tcell38449;
typedef struct tcellseq38465 tcellseq38465;
typedef struct tgcheap40416 tgcheap40416;
typedef struct tcellset38461 tcellset38461;
typedef struct tpagedesc38457 tpagedesc38457;
typedef struct tmemregion22010 tmemregion22010;
typedef struct tsmallchunk21243 tsmallchunk21243;
typedef struct tllchunk22004 tllchunk22004;
typedef struct tbigchunk21245 tbigchunk21245;
typedef struct tintset21218 tintset21218;
typedef struct ttrunk21214 ttrunk21214;
typedef struct tavlnode22008 tavlnode22008;
typedef struct tgcstat40414 tgcstat40414;
typedef struct tbasechunk21241 tbasechunk21241;
typedef struct tfreecell21233 tfreecell21233;
struct TGenericSeq {
NI len;
NI reserved;
};
typedef NIM_CHAR TY611[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY611 data;
};
struct TY414855 {
NimStringDesc* Field0;
tjsonnode414839* Field1;
};
struct tjsonnode414839 {
NU8 Kind;
union {
struct {NimStringDesc* Str;
} S1;
struct {NI64 Num;
} S2;
struct {NF Fnum;
} S3;
struct {NIM_BOOL Bval;
} S4;
struct {TY414854* Fields;
} S6;
struct {TY414859* Elems;
} S7;
} kindU;
};
typedef N_NIMCALL_PTR(void, TY891) (void* p, NI op);
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY891 marker;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct tcell38449 {
NI Refcount;
TNimType* Typ;
};
struct tcellseq38465 {
NI Len;
NI Cap;
tcell38449** D;
};
struct tcellset38461 {
NI Counter;
NI Max;
tpagedesc38457* Head;
tpagedesc38457** Data;
};
typedef tsmallchunk21243* TY22022[512];
typedef ttrunk21214* ttrunkbuckets21216[256];
struct tintset21218 {
ttrunkbuckets21216 Data;
};
struct tmemregion22010 {
NI Minlargeobj;
NI Maxlargeobj;
TY22022 Freesmallchunks;
tllchunk22004* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
NI Lastsize;
tbigchunk21245* Freechunkslist;
tintset21218 Chunkstarts;
tavlnode22008* Root;
tavlnode22008* Deleted;
tavlnode22008* Last;
tavlnode22008* Freeavlnodes;
};
struct tgcstat40414 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
NI64 Maxpause;
};
struct tgcheap40416 {
void* Stackbottom;
NI Cyclethreshold;
tcellseq38465 Zct;
tcellseq38465 Decstack;
tcellset38461 Cycleroots;
tcellseq38465 Tempstack;
NI Recgclock;
tmemregion22010 Region;
tgcstat40414 Stat;
};
typedef NI TY21221[8];
struct tpagedesc38457 {
tpagedesc38457* Next;
NI Key;
TY21221 Bits;
};
struct tbasechunk21241 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct tsmallchunk21243 {
  tbasechunk21241 Sup;
tsmallchunk21243* Next;
tsmallchunk21243* Prev;
tfreecell21233* Freelist;
NI Free;
NI Acc;
NF64 Data;
};
struct tllchunk22004 {
NI Size;
NI Acc;
tllchunk22004* Next;
};
struct tbigchunk21245 {
  tbasechunk21241 Sup;
tbigchunk21245* Next;
tbigchunk21245* Prev;
NI Align;
NF64 Data;
};
struct ttrunk21214 {
ttrunk21214* Next;
NI Key;
TY21221 Bits;
};
typedef tavlnode22008* TY22014[2];
struct tavlnode22008 {
TY22014 Link;
NI Key;
NI Upperbound;
NI Level;
};
struct tfreecell21233 {
tfreecell21233* Next;
NI Zerofield;
};
struct TY414854 {
  TGenericSeq Sup;
  TY414855 data[SEQ_DECL_SIZE];
};
struct TY414859 {
  TGenericSeq Sup;
  tjsonnode414839* data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP4127)(void* p, NI op);
N_NIMCALL(void, TMP4128)(void* p, NI op);
N_NIMCALL(void, TMP4129)(void* p, NI op);
N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(tcell38449*, usrtocell_41843)(void* usr);
static N_INLINE(void, rtladdzct_43002)(tcell38449* c);
N_NOINLINE(void, addzct_41815)(tcellseq38465* s, tcell38449* c);
N_NIMCALL(void*, newSeqRC1)(TNimType* typ, NI len);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, topretty_417144)(NimStringDesc** result, tjsonnode414839* node, NI indent, NIM_BOOL ml, NIM_BOOL lstarr, NI currindent);
N_NIMCALL(void, nl_417113)(NimStringDesc** s, NIM_BOOL ml);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
N_NIMCALL(void, indent_417098)(NimStringDesc** s, NI i);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI count, NIM_CHAR c);
N_NIMCALL(NI, newindent_417105)(NI curr, NI indent, NIM_BOOL ml);
N_NIMCALL(NimStringDesc*, escapejson_417120)(NimStringDesc* s);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(NimStringDesc*, rawNewString)(NI cap);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuToHex)(NI64 x, NI len);
N_NIMCALL(NimStringDesc*, nimInt64ToStr)(NI64 x);
N_NIMCALL(NimStringDesc*, nimFloatToStr)(NF x);
N_NIMCALL(NimStringDesc*, nimBoolToStr)(NIM_BOOL x);
TNimNode* NimDT_tjsonnode_kind[8];
STRING_LITERAL(TMP4135, "", 0);
STRING_LITERAL(TMP4136, "\012", 1);
STRING_LITERAL(TMP4137, "{", 1);
STRING_LITERAL(TMP4138, ", ", 2);
STRING_LITERAL(TMP4139, "\"", 1);
STRING_LITERAL(TMP4140, "\\\"", 2);
STRING_LITERAL(TMP4141, "\\\\", 2);
STRING_LITERAL(TMP4142, "\\u", 2);
STRING_LITERAL(TMP4143, ": ", 2);
STRING_LITERAL(TMP4144, "}", 1);
STRING_LITERAL(TMP4145, "{}", 2);
STRING_LITERAL(TMP4148, "[", 1);
STRING_LITERAL(TMP4149, "]", 1);
STRING_LITERAL(TMP4150, "[]", 2);
STRING_LITERAL(TMP4151, "null", 4);
TNimType NTI414839; /* TJsonNode */
TNimType NTI414835; /* TJsonNodeKind */
extern TNimType NTI143; /* string */
extern TNimType NTI3690; /* BiggestInt */
extern TNimType NTI125; /* float */
extern TNimType NTI132; /* bool */
TNimType NTI414855; /* tuple[key: string, val: PJsonNode] */
TNimType NTI414854; /* seq[tuple[key: string, val: PJsonNode]] */
TNimType NTI414859; /* seq[PJsonNode] */
TNimType NTI414837; /* PJsonNode */
extern tgcheap40416 gch_40442;
N_NIMCALL(void, TMP4127)(void* p, NI op) {
	TY414854* a;
	NI LOC1;
	a = (TY414854*)p;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Field0, op);
	nimGCvisit((void*)a->data[LOC1].Field1, op);
	}
}
N_NIMCALL(void, TMP4128)(void* p, NI op) {
	TY414859* a;
	NI LOC1;
	a = (TY414859*)p;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1], op);
	}
}
N_NIMCALL(void, TMP4129)(void* p, NI op) {
	tjsonnode414839* a;
	a = (tjsonnode414839*)p;
	switch ((*a).Kind) {
	case ((NU8) 4):
	nimGCvisit((void*)(*a).kindU.S1.Str, op);
	break;
	case ((NU8) 2):
	break;
	case ((NU8) 3):
	break;
	case ((NU8) 1):
	break;
	case ((NU8) 0):
	break;
	case ((NU8) 5):
	nimGCvisit((void*)(*a).kindU.S6.Fields, op);
	break;
	case ((NU8) 6):
	nimGCvisit((void*)(*a).kindU.S7.Elems, op);
	break;
	} 
}

static N_INLINE(tcell38449*, usrtocell_41843)(void* usr) {
	tcell38449* result;
	result = 0;
	result = ((tcell38449*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(tcell38449))))));
	return result;
}

static N_INLINE(void, rtladdzct_43002)(tcell38449* c) {
	addzct_41815(&gch_40442.Zct, c);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tcell38449* c;
	c = usrtocell_41843(p);
	{
		(*c).Refcount -= 8;
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		rtladdzct_43002(c);
	}
	LA3: ;
}

N_NIMCALL(tjsonnode414839*, newjarray_415112)(void) {
	tjsonnode414839* result;
	result = 0;
	result = (tjsonnode414839*) newObj((&NTI414837), sizeof(tjsonnode414839));
	(*result).Kind = ((NU8) 6);
	if ((*result).kindU.S7.Elems) nimGCunrefNoCycle((*result).kindU.S7.Elems);
	(*result).kindU.S7.Elems = (TY414859*) newSeqRC1((&NTI414859), 0);
	return result;
}

N_NIMCALL(tjsonnode414839*, HEX25_415161)(NimStringDesc* s) {
	tjsonnode414839* result;
	NimStringDesc* LOC1;
	result = 0;
	result = (tjsonnode414839*) newObj((&NTI414837), sizeof(tjsonnode414839));
	(*result).Kind = ((NU8) 4);
	LOC1 = 0;
	LOC1 = (*result).kindU.S1.Str; (*result).kindU.S1.Str = copyStringRC1(s);
	if (LOC1) nimGCunrefNoCycle(LOC1);
	return result;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		tcell38449* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_41843(src);
		(*c).Refcount += 8;
	}
	LA3: ;
	{
		tcell38449* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_41843((*dest));
		{
			(*c).Refcount -= 8;
			if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA11;
			rtladdzct_43002(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(tjsonnode414839*, HEX25_415285)(TY414855* keyvals, NI keyvalslen0) {
	tjsonnode414839* result;
	NI i_415369;
	TY414855 p_415370;
	NI i_415382;
	result = 0;
	result = (tjsonnode414839*) newObj((&NTI414837), sizeof(tjsonnode414839));
	(*result).Kind = ((NU8) 5);
	if ((*result).kindU.S6.Fields) nimGCunrefNoCycle((*result).kindU.S6.Fields);
	(*result).kindU.S6.Fields = (TY414854*) newSeqRC1((&NTI414854), keyvalslen0);
	i_415369 = 0;
	memset((void*)&p_415370, 0, sizeof(p_415370));
	i_415382 = 0;
	while (1) {
		NimStringDesc* LOC2;
		if (!(i_415382 < keyvalslen0)) goto LA1;
		i_415369 = i_415382;
		p_415370.Field0 = keyvals[i_415382].Field0;
		p_415370.Field1 = keyvals[i_415382].Field1;
		LOC2 = 0;
		LOC2 = (*result).kindU.S6.Fields->data[i_415369].Field0; (*result).kindU.S6.Fields->data[i_415369].Field0 = copyStringRC1(p_415370.Field0);
		if (LOC2) nimGCunrefNoCycle(LOC2);
		asgnRefNoCycle((void**) &(*result).kindU.S6.Fields->data[i_415369].Field1, p_415370.Field1);
		i_415382 += 1;
	} LA1: ;
	return result;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(void, nl_417113)(NimStringDesc** s, NIM_BOOL ml) {
	{
		if (!ml) goto LA3;
		(*s) = resizeString((*s), 1);
appendString((*s), ((NimStringDesc*) &TMP4136));
	}
	LA3: ;
}

N_NIMCALL(void, indent_417098)(NimStringDesc** s, NI i) {
	NimStringDesc* LOC1;
	LOC1 = 0;
	LOC1 = nsuRepeatChar(i, 32);
	(*s) = resizeString((*s), LOC1->Sup.len + 0);
appendString((*s), LOC1);
}

N_NIMCALL(NI, newindent_417105)(NI curr, NI indent, NIM_BOOL ml) {
	NI result;
	result = 0;
	{
		if (!ml) goto LA3;
		result = (NI64)(curr + indent);
		goto BeforeRet;
	}
	goto LA1;
	LA3: ;
	{
		result = indent;
		goto BeforeRet;
	}
	LA1: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NimStringDesc*, escapejson_417120)(NimStringDesc* s) {
	NimStringDesc* result;
	NI x_417124;
	NI i_417131;
	NI result_417133;
	result = 0;
	result = rawNewString((NI64)(s->Sup.len + (NI)((NU64)(s->Sup.len) >> (NU64)(3))));
	result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP4139));
	x_417124 = 0;
	i_417131 = 0;
	result_417133 = 0;
	while (1) {
		NI r;
		if (!(i_417131 < s->Sup.len)) goto LA1;
		{
			if (!((NU64)(((NU8)(s->data[i_417131]))) <= (NU64)(127))) goto LA4;
			result_417133 = ((NI) (((NU8)(s->data[i_417131]))));
			i_417131 += 1;
		}
		goto LA2;
		LA4: ;
		{
			if (!((NI)((NU64)(((NI) (((NU8)(s->data[i_417131]))))) >> (NU64)(5)) == 6)) goto LA7;
			result_417133 = (NI)((NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[i_417131])))) & 31)))) << (NU64)(6)) | ((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 1)])))) & 63))));
			i_417131 += 2;
		}
		goto LA2;
		LA7: ;
		{
			if (!((NI)((NU64)(((NI) (((NU8)(s->data[i_417131]))))) >> (NU64)(4)) == 14)) goto LA10;
			result_417133 = (NI)((NI)((NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[i_417131])))) & 15)))) << (NU64)(12)) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 1)])))) & 63)))) << (NU64)(6))) | ((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 2)])))) & 63))));
			i_417131 += 3;
		}
		goto LA2;
		LA10: ;
		{
			if (!((NI)((NU64)(((NI) (((NU8)(s->data[i_417131]))))) >> (NU64)(3)) == 30)) goto LA13;
			result_417133 = (NI)((NI)((NI)((NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[i_417131])))) & 7)))) << (NU64)(18)) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 1)])))) & 63)))) << (NU64)(12))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 2)])))) & 63)))) << (NU64)(6))) | ((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 3)])))) & 63))));
			i_417131 += 4;
		}
		goto LA2;
		LA13: ;
		{
			if (!((NI)((NU64)(((NI) (((NU8)(s->data[i_417131]))))) >> (NU64)(2)) == 62)) goto LA16;
			result_417133 = (NI)((NI)((NI)((NI)((NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[i_417131])))) & 3)))) << (NU64)(24)) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 1)])))) & 63)))) << (NU64)(18))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 2)])))) & 63)))) << (NU64)(12))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 3)])))) & 63)))) << (NU64)(6))) | ((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 4)])))) & 63))));
			i_417131 += 5;
		}
		goto LA2;
		LA16: ;
		{
			if (!((NI)((NU64)(((NI) (((NU8)(s->data[i_417131]))))) >> (NU64)(1)) == 126)) goto LA19;
			result_417133 = (NI)((NI)((NI)((NI)((NI)((NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[i_417131])))) & 1)))) << (NU64)(30)) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 1)])))) & 63)))) << (NU64)(24))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 2)])))) & 63)))) << (NU64)(18))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 3)])))) & 63)))) << (NU64)(12))) | (NI)((NU64)(((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 4)])))) & 63)))) << (NU64)(6))) | ((NI) ((NI)(((NI) (((NU8)(s->data[(NI64)(i_417131 + 5)])))) & 63))));
			i_417131 += 6;
		}
		goto LA2;
		LA19: ;
		{
			result_417133 = ((NI) (((NU8)(s->data[i_417131]))));
			i_417131 += 1;
		}
		LA2: ;
		x_417124 = result_417133;
		r = x_417124;
		{
			NIM_BOOL LOC24;
			NIM_CHAR c;
			LOC24 = (32 <= r);
			if (!(LOC24)) goto LA25;
			LOC24 = (r <= 127);
			LA25: ;
			if (!LOC24) goto LA26;
			c = ((NIM_CHAR) (((NI) (r))));
			switch (((NU8)(c))) {
			case 34:
			{
				result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP4140));
			}
			break;
			case 92:
			{
				result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP4141));
			}
			break;
			default:
			{
				result = addChar(result, c);
			}
			break;
			}
		}
		goto LA22;
		LA26: ;
		{
			NimStringDesc* LOC32;
			result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP4142));
			LOC32 = 0;
			LOC32 = nsuToHex(((NI64) (r)), 4);
			result = resizeString(result, LOC32->Sup.len + 0);
appendString(result, LOC32);
		}
		LA22: ;
	} LA1: ;
	result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP4139));
	return result;
}

N_NIMCALL(void, topretty_417144)(NimStringDesc** result, tjsonnode414839* node, NI indent, NIM_BOOL ml, NIM_BOOL lstarr, NI currindent) {
	switch ((*node).Kind) {
	case ((NU8) 5):
	{
		{
			NIM_BOOL LOC4;
			LOC4 = !((currindent == 0));
			if (!(LOC4)) goto LA5;
			LOC4 = !(lstarr);
			LA5: ;
			if (!LOC4) goto LA6;
			nl_417113(result, ml);
		}
		LA6: ;
		indent_417098(result, currindent);
		{
			NI i_417198;
			NI HEX3Atmp_417317;
			NI res_417319;
			if (!(0 < (*node).kindU.S6.Fields->Sup.len)) goto LA10;
			(*result) = resizeString((*result), 1);
appendString((*result), ((NimStringDesc*) &TMP4137));
			nl_417113(result, ml);
			i_417198 = 0;
			HEX3Atmp_417317 = 0;
			HEX3Atmp_417317 = (NI64)((*node).kindU.S6.Fields->Sup.len - 1);
			res_417319 = 0;
			while (1) {
				NI LOC17;
				NimStringDesc* LOC18;
				NI LOC19;
				if (!(res_417319 <= HEX3Atmp_417317)) goto LA12;
				i_417198 = res_417319;
				{
					if (!(0 < i_417198)) goto LA15;
					(*result) = resizeString((*result), 2);
appendString((*result), ((NimStringDesc*) &TMP4138));
					nl_417113(result, ml);
				}
				LA15: ;
				LOC17 = newindent_417105(currindent, indent, ml);
				indent_417098(result, LOC17);
				LOC18 = 0;
				LOC18 = escapejson_417120((*node).kindU.S6.Fields->data[i_417198].Field0);
				(*result) = resizeString((*result), LOC18->Sup.len + 0);
appendString((*result), LOC18);
				(*result) = resizeString((*result), 2);
appendString((*result), ((NimStringDesc*) &TMP4143));
				LOC19 = newindent_417105(currindent, indent, ml);
				topretty_417144(result, (*node).kindU.S6.Fields->data[i_417198].Field1, indent, ml, NIM_FALSE, LOC19);
				res_417319 += 1;
			} LA12: ;
			nl_417113(result, ml);
			indent_417098(result, currindent);
			(*result) = resizeString((*result), 1);
appendString((*result), ((NimStringDesc*) &TMP4144));
		}
		goto LA8;
		LA10: ;
		{
			(*result) = resizeString((*result), 2);
appendString((*result), ((NimStringDesc*) &TMP4145));
		}
		LA8: ;
	}
	break;
	case ((NU8) 4):
	{
		NimStringDesc* LOC26;
		{
			if (!lstarr) goto LA24;
			indent_417098(result, currindent);
		}
		LA24: ;
		LOC26 = 0;
		LOC26 = escapejson_417120((*node).kindU.S1.Str);
		(*result) = resizeString((*result), LOC26->Sup.len + 0);
appendString((*result), LOC26);
	}
	break;
	case ((NU8) 2):
	{
		NimStringDesc* LOC32;
		{
			if (!lstarr) goto LA30;
			indent_417098(result, currindent);
		}
		LA30: ;
		LOC32 = 0;
		LOC32 = nimInt64ToStr((*node).kindU.S2.Num);
		(*result) = resizeString((*result), LOC32->Sup.len + 0);
appendString((*result), LOC32);
	}
	break;
	case ((NU8) 3):
	{
		NimStringDesc* LOC38;
		{
			if (!lstarr) goto LA36;
			indent_417098(result, currindent);
		}
		LA36: ;
		LOC38 = 0;
		LOC38 = nimFloatToStr((*node).kindU.S3.Fnum);
		(*result) = resizeString((*result), LOC38->Sup.len + 0);
appendString((*result), LOC38);
	}
	break;
	case ((NU8) 1):
	{
		NimStringDesc* LOC44;
		{
			if (!lstarr) goto LA42;
			indent_417098(result, currindent);
		}
		LA42: ;
		LOC44 = 0;
		LOC44 = nimBoolToStr((*node).kindU.S4.Bval);
		(*result) = resizeString((*result), LOC44->Sup.len + 0);
appendString((*result), LOC44);
	}
	break;
	case ((NU8) 6):
	{
		{
			if (!lstarr) goto LA48;
			indent_417098(result, currindent);
		}
		LA48: ;
		{
			NI i_417304;
			NI HEX3Atmp_417321;
			NI res_417323;
			if (!!(((*node).kindU.S7.Elems->Sup.len == 0))) goto LA52;
			(*result) = resizeString((*result), 1);
appendString((*result), ((NimStringDesc*) &TMP4148));
			nl_417113(result, ml);
			i_417304 = 0;
			HEX3Atmp_417321 = 0;
			HEX3Atmp_417321 = (NI64)((*node).kindU.S7.Elems->Sup.len - 1);
			res_417323 = 0;
			while (1) {
				NI LOC59;
				if (!(res_417323 <= HEX3Atmp_417321)) goto LA54;
				i_417304 = res_417323;
				{
					if (!(0 < i_417304)) goto LA57;
					(*result) = resizeString((*result), 2);
appendString((*result), ((NimStringDesc*) &TMP4138));
					nl_417113(result, ml);
				}
				LA57: ;
				LOC59 = newindent_417105(currindent, indent, ml);
				topretty_417144(result, (*node).kindU.S7.Elems->data[i_417304], indent, ml, NIM_TRUE, LOC59);
				res_417323 += 1;
			} LA54: ;
			nl_417113(result, ml);
			indent_417098(result, currindent);
			(*result) = resizeString((*result), 1);
appendString((*result), ((NimStringDesc*) &TMP4149));
		}
		goto LA50;
		LA52: ;
		{
			(*result) = resizeString((*result), 2);
appendString((*result), ((NimStringDesc*) &TMP4150));
		}
		LA50: ;
	}
	break;
	case ((NU8) 0):
	{
		{
			if (!lstarr) goto LA64;
			indent_417098(result, currindent);
		}
		LA64: ;
		(*result) = resizeString((*result), 4);
appendString((*result), ((NimStringDesc*) &TMP4151));
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, HEX24_417337)(tjsonnode414839* node) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP4135));
	topretty_417144(&result, node, 1, NIM_FALSE, NIM_FALSE, 0);
	return result;
}
N_NOINLINE(void, jsonInit)(void) {
}

N_NOINLINE(void, jsonDatInit)(void) {
static TNimNode* TMP4123[7];
NI TMP4125;
static char* NIM_CONST TMP4124[7] = {
"JNull", 
"Jbool", 
"JInt", 
"JFloat", 
"JString", 
"JObject", 
"JArray"};
static TNimNode* TMP4126[2];
static TNimNode TMP916[19];
NTI414839.size = sizeof(tjsonnode414839);
NTI414839.kind = 18;
NTI414839.base = 0;
NTI414839.flags = 2;
NTI414835.size = sizeof(NU8);
NTI414835.kind = 14;
NTI414835.base = 0;
NTI414835.flags = 3;
for (TMP4125 = 0; TMP4125 < 7; TMP4125++) {
TMP916[TMP4125+1].kind = 1;
TMP916[TMP4125+1].offset = TMP4125;
TMP916[TMP4125+1].name = TMP4124[TMP4125];
TMP4123[TMP4125] = &TMP916[TMP4125+1];
}
TMP916[8].len = 7; TMP916[8].kind = 2; TMP916[8].sons = &TMP4123[0];
NTI414835.node = &TMP916[8];
TMP916[0].kind = 3;
TMP916[0].offset = offsetof(tjsonnode414839, Kind);
TMP916[0].typ = (&NTI414835);
TMP916[0].name = "kind";
TMP916[0].sons = &NimDT_tjsonnode_kind[0];
TMP916[0].len = 7;
TMP916[9].kind = 1;
TMP916[9].offset = offsetof(tjsonnode414839, kindU.S1.Str);
TMP916[9].typ = (&NTI143);
TMP916[9].name = "str";
NimDT_tjsonnode_kind[4] = &TMP916[9];
TMP916[10].kind = 1;
TMP916[10].offset = offsetof(tjsonnode414839, kindU.S2.Num);
TMP916[10].typ = (&NTI3690);
TMP916[10].name = "num";
NimDT_tjsonnode_kind[2] = &TMP916[10];
TMP916[11].kind = 1;
TMP916[11].offset = offsetof(tjsonnode414839, kindU.S3.Fnum);
TMP916[11].typ = (&NTI125);
TMP916[11].name = "fnum";
NimDT_tjsonnode_kind[3] = &TMP916[11];
TMP916[12].kind = 1;
TMP916[12].offset = offsetof(tjsonnode414839, kindU.S4.Bval);
TMP916[12].typ = (&NTI132);
TMP916[12].name = "bval";
NimDT_tjsonnode_kind[1] = &TMP916[12];
TMP916[13].len = 0; TMP916[13].kind = 2;
NimDT_tjsonnode_kind[0] = &TMP916[13];
NTI414855.size = sizeof(TY414855);
NTI414855.kind = 18;
NTI414855.base = 0;
NTI414855.flags = 2;
TMP4126[0] = &TMP916[16];
TMP916[16].kind = 1;
TMP916[16].offset = offsetof(TY414855, Field0);
TMP916[16].typ = (&NTI143);
TMP916[16].name = "Field0";
TMP4126[1] = &TMP916[17];
TMP916[17].kind = 1;
TMP916[17].offset = offsetof(TY414855, Field1);
TMP916[17].typ = (&NTI414837);
TMP916[17].name = "Field1";
TMP916[15].len = 2; TMP916[15].kind = 2; TMP916[15].sons = &TMP4126[0];
NTI414855.node = &TMP916[15];
NTI414854.size = sizeof(TY414854*);
NTI414854.kind = 24;
NTI414854.base = (&NTI414855);
NTI414854.flags = 2;
NTI414854.marker = TMP4127;
TMP916[14].kind = 1;
TMP916[14].offset = offsetof(tjsonnode414839, kindU.S6.Fields);
TMP916[14].typ = (&NTI414854);
TMP916[14].name = "fields";
NimDT_tjsonnode_kind[5] = &TMP916[14];
NTI414859.size = sizeof(TY414859*);
NTI414859.kind = 24;
NTI414859.base = (&NTI414837);
NTI414859.flags = 2;
NTI414859.marker = TMP4128;
TMP916[18].kind = 1;
TMP916[18].offset = offsetof(tjsonnode414839, kindU.S7.Elems);
TMP916[18].typ = (&NTI414859);
TMP916[18].name = "elems";
NimDT_tjsonnode_kind[6] = &TMP916[18];
NTI414839.node = &TMP916[0];
NTI414837.size = sizeof(tjsonnode414839*);
NTI414837.kind = 22;
NTI414837.base = (&NTI414839);
NTI414837.flags = 2;
NTI414837.marker = TMP4129;
}

